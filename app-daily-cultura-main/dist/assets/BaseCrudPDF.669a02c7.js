import{d as ae,a as ie,u as le,q as oe,b as ne,v as g,E as u,H as L,N as re,O as x,r as N,e as B,f as n,g as c,h as t,i as d,l as s,k as f,w as l,t as o,n as y,j as P,F as D,x as U,y as z,an as ce}from"./index.c93647e1.js";import{u as de,_ as Y,a as ue,b as _e,B as me,c as T,d as pe}from"./DatasheetFormat.bb093e19.js";import{_ as I}from"./Input.d2784565.js";import{_ as E}from"./Select.7b4ad9bd.js";import{g as fe}from"./get_status.6c591513.js";const he={class:"intro-y flex flex-col gap-2"},ve={class:"flex flex-col gap-3 lg:grid lg:grid-cols-4 lg:items-end"},ge={class:"grid grid-cols-2 gap-3"},ye={class:"w-full"},be={key:0,class:"w-full"},xe={key:1,class:"w-full"},Ce={key:0,class:"flex flex-col justify-start h-full"},we=t("label",{for:"regular-form-2",class:"form-label font-bold min-w-max mr-2"},"FECHA RANGO",-1),Ve={class:"grid grid-cols-2 gap-1.5 w-full intro-x"},ke={key:1,class:"flex items-start gap-6 h-full"},Be={class:"w-full intro-x"},De={key:2,class:"flex items-start gap-6 h-full"},ze={class:"w-full intro-x"},Ee={class:"flex gap-1 relative"},Fe={class:"flex gap-1 relative"},$e={class:"flex gap-1 relative"},Se={class:"flex justify-end"},Oe={class:"customize-item"},Ne={key:0,class:"w-10 h-10 rounded-lg bg-gray-800 text-white flex items-center justify-center"},Te=["src"],Ie={class:"customize-item"},Ae=["src"],Me={class:"px-4 py-1 rounded-full text-white bg-blue-400 font-semibold text-sm flex align-center w-max cursor-pointer active:bg-gray-300 transition duration-300 ease"},Re={class:"customize-item"},je={class:"customize-item"},He={class:"customize-item"},Le={class:"customize-item"},Pe={class:"customize-item"},Ue={class:"customize-item"},Ye={class:"customize-item"},qe={class:"customize-item"},Ze={class:"customize-item"},Ge={class:"customize-item"},Je={class:"customize-item"},Ke={class:"customize-item"},Qe={class:"customize-item"},We={class:"customize-item"},Xe={class:"block"},et={class:"list-decimal list-outside flex flex-col gap-y-1 justify-end text-sm font-medium"},tt={class:"inline-flex items-center py-0.5 text-gray-800 whitespace-nowrap"},st={class:"customize-item"},at={class:"flex items-center"},it={class:"flex items-center"},lt={class:"flex gap-2 justify-end"},ot=["onClick"],nt=t("span",{class:"text-sm whitespace-nowrap"}," Cambiar contrase\xF1a ",-1),rt={class:"flex gap-2 justify-end"},ct=["onClick"],dt=t("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M14.804 6.74763L10.724 2.24763C10.6539 2.16994 10.5683 2.10778 10.4727 2.06516C10.3771 2.02253 10.2737 2.00038 10.169 2.00013H4.91902C4.66984 1.99716 4.4225 2.04331 4.19115 2.13593C3.95979 2.22855 3.74895 2.36584 3.57066 2.53995C3.39237 2.71406 3.25012 2.92159 3.15204 3.15068C3.05395 3.37978 3.00196 3.62595 2.99902 3.87514V15.1251C3.00196 15.3743 3.05395 15.6205 3.15204 15.8496C3.25012 16.0787 3.39237 16.2862 3.57066 16.4603C3.74895 16.6344 3.95979 16.7717 4.19115 16.8643C4.4225 16.957 4.66984 17.0031 4.91902 17.0001H13.079C13.3282 17.0031 13.5755 16.957 13.8069 16.8643C14.0382 16.7717 14.2491 16.6344 14.4274 16.4603C14.6057 16.2862 14.7479 16.0787 14.846 15.8496C14.9441 15.6205 14.9961 15.3743 14.999 15.1251V7.25013C14.9985 7.06426 14.929 6.88518 14.804 6.74763V6.74763ZM13.2365 7.25013H10.2815C10.1269 7.23491 9.98445 7.15956 9.88485 7.04032C9.78525 6.92108 9.73647 6.76749 9.74902 6.61263V3.50014H9.83152L13.2365 7.25013ZM13.079 15.5001H4.91902C4.8668 15.5032 4.8145 15.4959 4.7651 15.4787C4.71571 15.4614 4.6702 15.4347 4.63118 15.3998C4.59216 15.365 4.56041 15.3228 4.53773 15.2756C4.51505 15.2285 4.5019 15.1774 4.49902 15.1251V3.87514C4.5019 3.82291 4.51505 3.77176 4.53773 3.72462C4.56041 3.67749 4.59216 3.63529 4.63118 3.60045C4.6702 3.56562 4.71571 3.53882 4.7651 3.52161C4.8145 3.50439 4.8668 3.4971 4.91902 3.50014H8.24902V6.61263C8.23691 7.1651 8.44384 7.69993 8.82462 8.10039C9.20541 8.50085 9.72915 8.73442 10.2815 8.75014H13.499V15.1251C13.4961 15.1774 13.483 15.2285 13.4603 15.2756C13.4376 15.3228 13.4059 15.365 13.3669 15.3998C13.3278 15.4347 13.2823 15.4614 13.2329 15.4787C13.1835 15.4959 13.1312 15.5032 13.079 15.5001V15.5001Z",fill:"#FCFCFC"})],-1),ut=[dt],_t=["id"],mt=["onClick"],pt=t("span",{class:"text-sm"}," Editar ",-1),bt=ae({__name:"BaseCrudPDF",props:{edit_gestor:{type:Boolean,default:!1},headers:null,items:null,item_see_fnc:{type:[Function,Boolean],default:()=>!1},item_see_fullview:{type:Boolean,default:!1},label:{default:""},management_permissions:{type:Boolean,default:!1},onDeleteFnc:{type:Function,default:()=>!1},show_exports:{type:Boolean,default:!1},hiddenButton:{type:Boolean,default:!1}},emits:["change_status","change_filter"],setup(_,{emit:F}){const A=_,M="https://cultura.ssiset.com",q=ie(),$=le(),Z=oe(),{options:S}=ne(),O=g(()=>String(Z.name).split(".")[0]),G=g(()=>A.headers.filter(a=>a.value!="actions"&&a.value!="created_at"&&a.value!="status"&&a.value!="status").map(a=>({value:a.value,label:a.text})).sort((a,h)=>{const p=a.label.toLowerCase(),v=h.label.toLowerCase();return p<v?-1:p>v?1:0})),J=g(()=>{let r=S.status;return r.push({label:"TODOS",value:"all"}),r}),C=g(()=>!!(u.computed.is_role("super.root")||u.computed.is_role("root"))),R=L({by:"",type:""}),i=L({search_field:"",search_value:"",status_criteria:"all",user_status_criteria:"",date_criteria_start:"",date_criteria_end:""});re(()=>i.search_field,()=>{i.search_value=""});const j=g(()=>{const r={binnacle_name:"binnacles",lineament_id:"lineaments"};let a=[];return r[i.search_field]?a=S[r[i.search_field]]:a=S[i.search_field],a||[]}),K=()=>{F("change_filter",i)},Q=()=>{i.search_field="",i.search_value="",i.status_criteria="all",i.user_status_criteria="",i.date_criteria_start="",i.date_criteria_end="",F("change_filter",i)};g(()=>{const r=[];return i.status_criteria!="all"&&r.push({field:"status",comparison:"=",criteria:i.status_criteria}),i.user_status_criteria!==""&&r.push({field:"status",comparison:"=",criteria:i.user_status_criteria}),i.date_criteria_start!==""&&r.push({field:"created_at",criteria:i.date_criteria_start,comparison:(a,h)=>{const p=x(a).format("YYYY-MM-DD"),v=new Date(p).getTime(),b=new Date(h).getTime(),e=g(()=>i.date_criteria_end!==""?new Date(i.date_criteria_end).getTime():new Date().getTime());return v>=b&&v<=e.value}}),r});const w=N(!1),V=N(!1),k=N(!1),W=r=>{ce.fire("En proceso","Se va a generar un PDF...","success")},X=r=>{A.edit_gestor?$.push({name:`${O.value}.edit`,params:{id:r}}):$.push({name:`${O.value}.edit`,params:{id:r}})},ee=r=>{$.push({name:`${O.value}.changePassword`,params:{id:r}})},te=r=>{const a=q.get_user.id,{user_id:h,created_by:p,status:v}=r,b=p==a||h==a||p&&p.id===a;return!!(v=="REC"&&b)},{hasDoubleManagement:se,reviewersFromDouble:H}=de();return(r,a)=>{const h=B("FilterIcon"),p=B("ExternalLinkIcon"),v=B("EditIcon"),b=B("DataTable");return n(),c("div",he,[t("section",ve,[t("div",ge,[t("div",ye,[d(E,{label:"BUSCAR EN",tooltip:"Seleccione en que campo quiere buscar",placeholder:"Seleccione",name:"search_field",modelValue:s(i).search_field,"onUpdate:modelValue":a[0]||(a[0]=e=>s(i).search_field=e),options:s(G)},null,8,["modelValue","options"])]),s(j).length?(n(),c("div",be,[d(E,{label:"NOMBRE",tooltip:"Seleccione el valor a buscar",placeholder:"Seleccione",name:"search_value",modelValue:s(i).search_value,"onUpdate:modelValue":a[1]||(a[1]=e=>s(i).search_value=e),options:s(j)},null,8,["modelValue","options"])])):(n(),c("div",xe,[d(I,{type:"text",label:"VALOR",tooltip:"Ingrese el valor a buscar",placeholder:"Valor",name:"search_value",modelValue:s(i).search_value,"onUpdate:modelValue":a[2]||(a[2]=e=>s(i).search_value=e)},null,8,["modelValue"])]))]),s(k)?(n(),c("div",Ce,[we,t("div",Ve,[d(I,{class:"",type:"date",tooltip:"Desde",name:"date_criteria_start",modelValue:s(i).date_criteria_start,"onUpdate:modelValue":a[3]||(a[3]=e=>s(i).date_criteria_start=e)},null,8,["modelValue"]),d(I,{class:"",type:"date",tooltip:"Hasta",name:"date_criteria_end",modelValue:s(i).date_criteria_end,"onUpdate:modelValue":a[4]||(a[4]=e=>s(i).date_criteria_end=e)},null,8,["modelValue"])])])):f("",!0),s(w)?(n(),c("div",ke,[t("div",Be,[d(E,{label:"ESTADO",tooltip:"",placeholder:"Seleccione",name:"status_criteria",modelValue:s(i).status_criteria,"onUpdate:modelValue":a[5]||(a[5]=e=>s(i).status_criteria=e),options:s(J),allowEmpty:!0},null,8,["modelValue","options"])])])):f("",!0),s(V)?(n(),c("div",De,[t("div",ze,[d(E,{label:"ESTADO",tooltip:"",placeholder:"Seleccione",name:"user_status_criteria",modelValue:s(i).user_status_criteria,"onUpdate:modelValue":a[6]||(a[6]=e=>s(i).user_status_criteria=e),options:[{label:"ACTIVO",value:"1"},{label:"INACTIVO",value:"0"}],allowEmpty:!1},null,8,["modelValue"])])])):f("",!0),t("div",{class:"flex"},[t("div",{class:""},[t("button",{class:"btn btn-primary shadow-md mr-2",onClick:K},"Filtrar")]),t("div",{class:""},[t("button",{class:"btn btn-danger shadow-md mr-2",onClick:Q},"Limpiar")])])]),d(b,{headers:_.headers,items:_.items,"sort-by":s(R).by,"sort-type":s(R).type,"rows-per-page":100,"hide-rows-per-page":!0,"hide-footer":!0,"table-class-name":"customize-table"},{"header-status":l(({text:e})=>[t("div",Ee,[t("p",null,o(e),1),t("button",{onClick:a[7]||(a[7]=m=>w.value=!s(w)),class:y([s(w)?"opacity-100":"opacity-50","hover:opacity-100 text-primary transition"])},[d(h,{size:"20"})],2)])]),"header-user_status":l(({text:e})=>[t("div",Fe,[t("p",null,o(e),1),t("button",{onClick:a[8]||(a[8]=m=>V.value=!s(V)),class:y([s(V)?"opacity-100":"opacity-50","hover:opacity-100 text-primary transition"])},[d(h,{size:"20"})],2)])]),"header-created_at":l(({text:e})=>[t("div",$e,[t("p",null,o(e),1),t("button",{onClick:a[9]||(a[9]=m=>k.value=!s(k)),class:y([s(k)?"opacity-100":"opacity-50","hover:opacity-100 text-primary transition"])},[d(h,{size:"20"})],2)])]),"header-actions":l(({text:e})=>[t("div",Se,o(e),1)]),"item-development_activity_image":l(e=>[t("div",Oe,[e.development_activity_image.slice(-3)==="pdf"?(n(),c("span",Ne,"PDF")):(n(),c("img",{key:1,src:s(M)+e.development_activity_image,class:"w-10 h-10 rounded-lg object-cover"},null,8,Te))])]),"item-evidence_participation_image":l(e=>[t("div",Ie,[t("img",{src:s(M)+e.evidence_participation_image,class:"w-10 h-10 rounded-lg object-cover"},null,8,Ae)])]),"item-disinterest_apathy":l(({disinterest_apathy:e})=>[P(o(e==1?"SI":"NO"),1)]),"item-role":l(({role:e})=>[t("p",{class:y(e=="Monitor Cultural"?"opacity-100 text-danger transition":e=="Instructor"?"opacity-100 text-success":"opacity-90 transition")},[t("b",null,o(e),1)],2)]),"item-roles":l(({roles:e})=>[(n(!0),c(D,null,U(e,m=>(n(),c("span",Me,o(m.name),1))),256))]),"item-reintegration":l(({reintegration:e})=>[P(o(e==1?"SI":"NO"),1)]),"item-created_at":l(({created_at:e})=>[t("div",Re,[t("p",null,o(e!=null&&e!=""?s(x)(e).format("DD/MM/YYYY"):""),1)])]),"item-start_time":l(({start_time:e})=>[t("div",je,[t("p",null,o(e!=null&&e!=""?s(x)(`2000-01-01 ${e}`).format("hh:mm"):""),1)])]),"item-final_hour":l(({final_hour:e})=>[t("div",He,[t("p",null,o(e!=null&&e!=""?s(x)(`2000-01-01 ${e}`).format("hh:mm"):""),1)])]),"item-final_time":l(({final_time:e})=>[t("div",Le,[t("p",null,o(e!=null&&e!=""?s(x)(`2000-01-01 ${e}`).format("hh:mm"):""),1)])]),"item-place_type":l(e=>[t("div",Pe,[t("p",null,o(s(u).get_option_label("place_types",e.place_type)),1)])]),"item-beneficiary_attrition_factors":l(e=>[t("div",Ue,[t("p",null,o(s(u).get_option_label("beneficiary_attrition_factors",e.beneficiary_attrition_factors)),1)])]),"item-binnacle_id":l(e=>[t("div",Ye,[t("p",null,o(s(u).get_option_label("binnacles",e.binnacle_id)),1)])]),"item-user_id":l(e=>[t("div",qe,[t("p",null,o(s(u).get_option_label("users_table",e.user.id)),1)])]),"item-created_by":l(e=>[t("div",Ze,[t("p",null,o(s(u).get_option_label("users_table",e.created_by.id)),1)])]),"item-nac_id":l(e=>[t("div",Ge,[t("p",null,o(s(u).get_option_label("nacs",e.nac_id)),1)])]),"item-expertise_id":l(e=>[t("div",Je,[t("p",null,o(s(u).get_option_label("expertises",e.expertise_id)),1)])]),"item-lineament_id":l(e=>[t("div",Ke,[t("p",null,o(s(u).get_option_label("lineaments",e.lineament_id)),1)])]),"item-cultural_right_id":l(e=>[t("div",Qe,[t("p",null,o(s(u).get_option_label("cultural_rights",e.cultural_right_id)),1)])]),"item-orientation_id":l(e=>[t("div",We,[t("p",null,o(s(u).get_option_label("orientations",e.orientation_id)),1)])]),"item-aspects":l(e=>[t("div",Xe,[t("ol",et,[(n(!0),c(D,null,U(e.aspects,m=>(n(),c("li",null,[t("p",tt,o(s(u).get_option_label("aspects",m)),1)]))),256))])])]),"item-roles_mm":l(({roles:e})=>[d(Y,{type:"roles_display",options:e.map(m=>m.role_id)},null,8,["options"])]),"item-roles_associate":l(({roles_associate:e})=>[d(Y,{type:"roles_display",options:e},null,8,["options"])]),"item-datasheet_planning":l(({datasheet_planning:e})=>[d(ue,{datasheet:e.datasheet},null,8,["datasheet"])]),"item-status":l(e=>[t("div",st,[t("p",{class:y(e.status=="REC"?"opacity-100 text-danger transition":e.status=="APRO"?"opacity-100 text-success":"opacity-90 transition")},o(s(fe)(e.status)),3)])]),"item-user_status":l(e=>[t("div",at,[d(_e,{onToggle:a[10]||(a[10]=m=>F("change_status")),id:e.id,actual_status:e.status},null,8,["id","actual_status"])])]),"item-has_profile":l(e=>[t("div",it,[t("p",{class:y(e.has_profile=="NO"?"text-danger":"")},[t("b",null,o(e.has_profile),1)],2)])]),"item-change_password":l(e=>[t("div",lt,[s(C)?(n(),c("button",{key:0,onClick:m=>ee(e.id),class:"btn btn-success text-white flex flex-nowrap gap-1 items-center"},[d(p,{icon:"Password",class:"w-5 h-5"}),nt],8,ot)):f("",!0)])]),"item-actions":l(e=>[t("div",rt,[s(C)&&!_.hiddenButton?(n(),c("button",{key:0,onClick:m=>W(e.id),class:"btn btn-danger flex gap-1 items-center"},ut,8,ct)):f("",!0),_.item_see_fnc?(n(),c("div",{key:1,id:`see_${e.id}`},[d(me,{item:_.item_see_fnc(e),full_view:_.item_see_fullview},null,8,["item","full_view"])],8,_t)):f("",!0),te(e)||s(C)&&!_.hiddenButton?(n(),c("button",{key:2,onClick:m=>X(e.id),class:"btn btn-primary flex gap-1 items-center"},[d(v,{class:"w-5 h-5"}),pt],8,mt)):f("",!0),s(se)?(n(),c(D,{key:3},[s(u).computed.is_role(s(H).first)&&e.status==="ENREV"?(n(),z(T,{key:0,id:e.id},null,8,["id"])):s(u).computed.is_role(s(H).second)&&e.status==="REV"?(n(),z(T,{key:1,id:e.id},null,8,["id"])):f("",!0)],64)):(n(),c(D,{key:4},[_.management_permissions&&e.status=="ENREV"?(n(),z(T,{key:0,id:e.id},null,8,["id"])):f("",!0)],64)),s(C)&&!_.hiddenButton?(n(),z(pe,{key:5,item:e,label:_.label,"on-delete":_.onDeleteFnc},null,8,["item","label","on-delete"])):f("",!0)])]),_:1},8,["headers","items","sort-by","sort-type"])])}}});export{bt as _};
