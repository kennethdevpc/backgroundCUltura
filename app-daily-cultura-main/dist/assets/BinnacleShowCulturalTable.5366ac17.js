import{d as S,v as d,r as c,D as b,f as _,g as C,h as n,l as a,k as R,i as f,M as w,F as y,u as P,q as F,e as V}from"./index.c93647e1.js";import{_ as B}from"./BaseCrud.3eb21af2.js";import{b as U}from"./binnacle_show_cultural.service.b2c61187.js";import{p as v}from"./permissions.c73d0fc1.js";import{c as k}from"./generals.service.ee73141b.js";import"./DatasheetFormat.bb093e19.js";import"./description.c57d405a.js";import"./user.service.5d6ec521.js";import"./useSlug.fdbf14df.js";import"./Input.d2784565.js";import"./Select.7b4ad9bd.js";import"./get_status.6c591513.js";const M={class:"intro-y flex flex-col sm:flex-row items-center mt-8"},L=n("h2",{class:"text-lg font-medium mr-auto"},"Bit\xE1coras show cultural",-1),G={key:0,class:"w-full sm:w-auto flex mt-4 sm:mt-0"},X={class:"intro-y box mt-5 p-5"},j={class:"flex items-center justify-center p-2 text-base"},ne=S({__name:"BinnacleShowCulturalTable",setup(H){k();const s=U(),A=P(),E=F(),g=d(()=>String(E.name).split(".")[0]),I=()=>{A.push({name:`${g.value}.create`})};async function x(e){s.destroy(e).then(()=>{o()})}const h=[{text:"CONSECUTIVO",value:"consecutive"},{text:"FECHA",value:"date_range",width:120},{text:"EXITOSA",value:"reached_target"},{text:"CREADO POR",value:"created_by.name"},{text:"ESTADO",value:"status"},{text:"ACCIONES",value:"actions"}],u=c([]),D=e=>{const{id:r,consecutive:l}=e;return{id:r,consecutive:l,sections:{general:{title:"Datos Generales",fields:{ACTIVIDAD:e.activity_name,FECHA:e.date_range,"EXPERTICIA ARTISTICA":e.expertise,"ESPEC\xCDFICA TU PARTICIPACI\xD3N ARTISTICA EN EL EVENTO":e.artistic_participation,"\xBFFUE EXITOSA TU PARTICIPACI\xD3N?":e.reached_target,SUSTENTACI\u00D3N:e.sustein}},multimedia:{title:"Multimedia",fields:{"IMAGEN (DESARROLLO DE LA JORNADA DE PACTO)":e.development_activity_image,"IMAGEN (EVIDENCIA DE PARTICIPACI\xD3N)":e.evidence_participation_image,"DOCUMENTO (AFORO)":e.aforo_pdf}}}}};let t=c(1),m=c(0);const i=c({});function T(e){t.value=1,i.value=e,o()}function N(){o()}const O=d(()=>u.value.map(e=>({...e,reached_target:e!=null&&e.reached_target?"SI":"NO",actions:"Acciones"})));async function o(){const e=Object.keys(i.value).length?new URLSearchParams(i.value):null;await s.get(t.value,e),u.value=s.data.all,m.value=s.data.count_page}return b(async()=>{await o()}),(e,r)=>{const l=V("v-pagination");return _(),C(y,null,[n("div",M,[L,a(v).binnacleculturalshow.create()?(_(),C("div",G,[n("button",{class:"btn btn-primary shadow-md mr-2",onClick:I},"Crear una bit\xE1cora")])):R("",!0)]),n("div",X,[n("div",j,[f(l,{modelValue:a(t),"onUpdate:modelValue":[r[0]||(r[0]=p=>w(t)?t.value=p:t=p),N],pages:a(m),"range-size":1,"active-color":"#DCEDFF"},null,8,["modelValue","pages"])]),f(B,{headers:h,items:a(O),item_see_fnc:D,management_permissions:a(v).binnacleculturalshow.crud_management(),label:"la bit\xE1cora","on-delete-fnc":x,onChange_filter:T},null,8,["items","management_permissions"])])],64)}}});export{ne as default};
