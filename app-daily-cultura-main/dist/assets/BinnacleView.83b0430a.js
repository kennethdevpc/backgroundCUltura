import{d as b,v as L,r,D as T,f as A,g as d,h as i,l as o,k as h,i as C,M as y,F as V,u as B,q as S,E as t,e as U}from"./index.c93647e1.js";import{B as P}from"./binnacles.service.7a3aef03.js";import{p as I}from"./permissions.c73d0fc1.js";import{c as F}from"./generals.service.ee73141b.js";import{_ as M}from"./BaseCrudPDF.669a02c7.js";import"./DatasheetFormat.bb093e19.js";import"./description.c57d405a.js";import"./user.service.5d6ec521.js";import"./useSlug.fdbf14df.js";import"./Input.d2784565.js";import"./Select.7b4ad9bd.js";import"./get_status.6c591513.js";const w={class:"intro-y flex flex-col sm:flex-row items-center mt-8"},H=i("h2",{class:"text-lg font-medium mr-auto"},"Bit\xE1coras de Monitor",-1),G={key:0,class:"w-full sm:w-auto flex mt-4 sm:mt-0"},k={class:"intro-y box mt-5 p-5"},j={class:"flex items-center justify-center p-2 text-base"},ne=b({__name:"BinnacleView",setup(J){F();const s=P(),E=B(),v=S(),x=L(()=>String(v.name).split(".")[0]),O=()=>{E.push({name:`${x.value}.create`})};async function g(e){s.destroy(e).then(()=>{l()})}const D=[{text:"CONSECUTIVO",value:"consecutive"},{text:"FECHA",value:"activity_date",width:120},{text:"HORA INICIO",value:"start_time"},{text:"HORA FINAL",value:"final_hour"},{text:"CREADO POR",value:"user.name"},{text:"C\xC9DULA",value:"profile.document_number"},{text:"ACTIVIDAD",value:"activity_name"},{text:"BIT\xC1CORA",value:"binnacle_name"},{text:"DERECHO CULTURAL",value:"cultural_right.name"},{text:"EXPERTICIA",value:"expertise.name"},{text:"LINEAMIENTO",value:"lineament_id"},{text:"LUGAR",value:"place"},{text:"MODALIDAD",value:"activation_mode"},{text:"NAC",value:"nac.name"},{text:"ORIENTACI\xD3N",value:"orientation.name"},{text:"CREACI\xD3N",value:"created_at"},{text:"ESTADO",value:"status"},{text:"ACCIONES",value:"actions"}],m=r([]),f=e=>{const{id:c,consecutive:_}=e;return{id:c,consecutive:_,sections:{general:{title:"Datos Generales",fields:{"CREADO POR":e.user.name,C\u00C9DULA:e.profile.document_number,BIT\u00C1CORA:t.get_option_label("binnacles",e.binnacle_id),ACTIVIDAD:e.activity_name,"MODO DE ACTIVACI\xD3N":e.activation_mode,FECHA:e.activity_date,"HORA INICIO":e.start_time,"HORA FINAL":e.final_hour,LUGAR:e.place,NAC:t.get_option_label("nacs",e.nac_id),EXPERTICIA:t.get_option_label("expertises",e.expertise_id),"DERECHO CULTURAL":t.get_option_label("cultural_rights",e.cultural_right_id),"OBJETIVO VIVENCIAL":e.experiential_objective,LINEAMIENTO:t.get_option_label("lineaments",e.lineament_id),ORIENTACI\u00D3N:t.get_option_label("orientations",e.orientation_id),PEC:t.get_option_label("pecs",e.pec_id),PEDAG\u00D3GICA:t.get_option_label("pedagogicals",e.pedagogical_id),"SE CUMPLI\xD3 EL OBJETIVO VIVENCIAL":e.goals_met.toUpperCase(),"EL POR QUE":e.explain_goals_met,INICIO:e.start_activity,DESARROLLO:e.activity_development,FINAL:e.end_of_activity,OBSERVACIONES:e.observations_activity,"CAPACIDAD DE BENEFICIARIOS":e.beneficiaries_capacity=="aforo"?"AFORO":"BENEFICIARIO"}},multimedia:{title:"Multimedia",fields:{"IMAGEN (DESARROLLO DE LA JORNADA DE PACTO)":e.development_activity_image,"IMAGEN (EVIDENCIA DE PARTICIPACI\xD3N)":e.evidence_participation_image,"DOCUMENTO (AFORO)":e.aforo_file}},aggregates:{title:"Agregados",fields:{"ASISTENTES (TABLA)":e.assistants.map(n=>({NOMBRE:n.full_name,C\u00C9DULA:n.document_number}))}}}}};let a=r(1),p=r(0);const u=r({});async function l(){const e=Object.keys(u.value).length?new URLSearchParams(u.value):null;await s.get(a.value,e).then(()=>{m.value=s.data.all,p.value=s.data.count_page})}function R(e){a.value=1,u.value=e,l()}function N(){l()}return T(async()=>{await l()}),(e,c)=>{const _=U("v-pagination");return A(),d(V,null,[i("div",w,[H,o(I).binnacles.create()?(A(),d("div",G,[i("button",{class:"btn btn-primary shadow-md mr-2",onClick:O},"Crear una bit\xE1cora")])):h("",!0)]),i("div",k,[i("div",j,[C(_,{modelValue:o(a),"onUpdate:modelValue":[c[0]||(c[0]=n=>y(a)?a.value=n:a=n),N],pages:o(p),"range-size":1,"active-color":"#DCEDFF"},null,8,["modelValue","pages"])]),C(M,{headers:D,items:o(m),item_see_fnc:f,management_permissions:o(I).binnacles.crud_management(),label:"la bit\xE1cora","on-delete-fnc":g,onChange_filter:R},null,8,["items","management_permissions"])])],64)}}});export{ne as default};
