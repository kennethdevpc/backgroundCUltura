import{d as P,v as O,r as A,c as M,f as s,g as o,h as r,l as n,k as L,i as k,M as U,y as F,F as u,x as I,t as h,u as B,q as G,E as a,e as V}from"./index.c93647e1.js";import{_ as w}from"./BaseCrud.3eb21af2.js";import{p as j}from"./polls.service.45c2397b.js";import"./DatasheetFormat.bb093e19.js";import"./description.c57d405a.js";import"./user.service.5d6ec521.js";import"./useSlug.fdbf14df.js";import"./Input.d2784565.js";import"./Select.7b4ad9bd.js";import"./get_status.6c591513.js";const H={class:"intro-y flex flex-col sm:flex-row items-center mt-8"},z=r("h2",{class:"text-lg font-medium mr-auto"},"Encuesta",-1),J={class:"intro-y box mt-5 p-5"},$={class:"flex items-center justify-center p-2 text-base"},q={key:1,class:"flex justify-center"},Q={key:0,class:"text-center"},Z={key:1,class:"grid grid-cols-1 gap-6 divide-dashed divide-y-2 divide-slate-200"},K={class:"flex flex-col gap-2 justify-evenly py-3 divide-dashed divide-y-2 divide-slate-200"},W={class:"font-bold uppercase text-center"},X={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 justify-evenly pt-6"},Y={key:1,class:"flex flex-col gap-1 justify-start"},ee={class:"text-xs opacity-80"},te={class:"font-semibold text-sm text-left break-words"},se={key:1,class:"text-center"},pe=P({__name:"Characterization",setup(ae){const l=j(),R=B(),x=G(),N=O(()=>String(x.name).split(".")[0]),E=O(()=>a.computed.is_role("root")||a.computed.is_role("super.root")),y=()=>{R.push({name:`${N.value}.create`})};async function m(e){await l.destroy(e),_()}const S=[{text:"#",value:"id"},{text:"BARRIO",value:"neighborhood"},{text:"OTRO BARRIO",value:"other_neighborhoods"},{text:"ENTIDAD",value:"entity_name.name"},{text:"G\xC9NERO",value:"gender"},{text:"EDAD",value:"age"},{text:"FECHA DE NACIMIENTO",value:"birth_date"},{text:"CREACI\xD3N",value:"created_at"},{text:"ACCIONES",value:"actions"}],p=A([]),v=e=>{var t,i;const{id:c}=e;let D=`Encuesta #${c}`;return{id:c,consecutive:D,sections:{general:{title:"Datos Generales",fields:{GENERO:a.get_option_label("genders",e.gender),"FECHA DE NACIMIENTO":e.birth_date,EDAD:e.age,"ESTADO CIVIL":a.get_option_label("marital_status",e.marital_state),ESTRATO:e.stratum,BARRIO:(t=e==null?void 0:e.neighborhood)==null?void 0:t.name,"OTRO BARRIO":(i=e.other_neighborhoods)!=null?i:"",TEL\u00C9FONO:e.phone,"CORREO ELECTR\xD3NICO":e.email,"NUMERO DE HIJOS":e.number_children,"PERSONAS A CARGO":e.dependents,"PARENTESCO CON JEFE DE HOGAR":a.get_option_label("relationship_households",e.relationship_head_household),"ETNIA QUE LE REPRESENTA":a.get_option_label("ethnicities",e.ethnicity),"VICTIMA DE CONFLICTO ARMADO":e.victim_armed_conflict==1?"SI":"NO","REGISTRO \xDANICO DE VICTIMAS":a.get_option_label("single_registry_victims",e.single_registry_victims),"ESTUDIA ACTUALMENTE":e.study==1?"SI":"NO","EDUCACI\xD3N ALCANZADA":a.get_option_label("educational_levels",e.educational_level),"REGIMEN DE SALUD":a.get_option_label("medical_services",e.medical_service),EPS:e.entity_name.name,"ESTADO DE SALUD":a.get_option_label("health_conditions",e.health_condition),"PADECE ENFERMEDAD":e.suffers_disease==1?"SI":"NO","TIPO DE ENFERMEDAD":a.get_option_label("disease_types",e.type_disease),"OTRO TIPO DE ENFERMEDAD":e.other_disease_type,"PADECE DISCAPACIDAD":e.disability==1?"SI":"NO","TIPO DE DISCAPACIDAD":a.get_option_label("disability_types",e.disability_type),"TOMA MEDICAMENTOS":e.takes_medication==1?"SI":"NO","DISCAPACIDAD HA SIDO VALORADA":e.assessed_disability==1?"SI":"NO","RECIBE TERAPIA":e.receives_therapy==1?"SI":"NO","ARTE QUE DESEMPE\xD1A":a.get_option_label("expertises",e.expertises),"Experiencia en el sector art\xEDstico (A\xF1os)":e.artistic_experience,"PERTENECE A UN GRUPO ART\xCDSTICO":e.artistic_group==1?"SI":"NO","NOMBRE DEL GRUPO":e.artistic_group_name,"ROL EN EL GRUPO":e.role_artistic_group,ESTADO:e.status,"MENSAJE DE RECHAZO":e.reject_message}}}}};let d=A(1),f=A(0);const g=A({});async function _(){const e=Object.keys(g.value).length?new URLSearchParams(g.value):null;await l.get(d.value,e),p.value=l.data.all,f.value=l.data.count_page}function b(e){d.value=1,g.value=e,_()}function T(){_()}const C=O(()=>l.data.all.at(0)?v(l.data.all.at(0)):null);return M(async()=>{E.value?(await _(),p.value.map(e=>({...e,actions:"Acciones"}))):await l.get().then(()=>{p.value=l.data.all})}),(e,c)=>{const D=V("v-pagination");return s(),o(u,null,[r("div",H,[z,n(E)||!n(E)&&n(l).data.all.length<1?(s(),o("button",{key:0,class:"btn btn-primary shadow-md mr-2",onClick:y}," Hacer encuesta ")):L("",!0)]),r("div",J,[r("div",$,[k(D,{modelValue:n(d),"onUpdate:modelValue":[c[0]||(c[0]=t=>U(d)?d.value=t:d=t),T],pages:n(f),"range-size":1,"active-color":"#DCEDFF"},null,8,["modelValue","pages"])]),n(E)?(s(),F(w,{key:0,headers:S,items:n(p),item_see_fnc:v,label:"la encuesta","on-delete-fnc":m,onChange_status:c[1]||(c[1]=t=>_()),onChange_filter:b,server_options:{page:1,rowsPerPage:15}},null,8,["items"])):(s(),o("div",q,[n(l).data.all.length<1?(s(),o("p",Q,"Haz tu encuesta para visualizar aqui...")):(s(),o("div",Z,[n(C)?(s(!0),o(u,{key:0},I(n(C).sections,t=>(s(),o("section",K,[r("h3",W,h(t.title),1),r("div",X,[(s(!0),o(u,null,I(Object.keys(t.fields),i=>(s(),o(u,null,[t.fields[i]==""||t.fields[i]==null||t.fields[i]=="No encontrad@"?(s(),o(u,{key:0},[],64)):(s(),o("div",Y,[r("h3",ee,h(i),1),r("p",te,h(t.fields[i]),1)]))],64))),256))])]))),256)):(s(),o("p",se,"Error en la consulta de datos..."))]))]))])],64)}}});export{pe as default};
