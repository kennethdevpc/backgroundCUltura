import{d as N,v as R,r,D as h,f as _,g as p,h as i,l as n,k as y,i as A,M as L,F as b,u as w,q as S,E as T,e as F}from"./index.c93647e1.js";import{d as M}from"./dialoguetables.service.31eedb5d.js";import{p as f}from"./permissions.c73d0fc1.js";import{_ as V}from"./BaseCrudPDF.669a02c7.js";import"./DatasheetFormat.bb093e19.js";import"./description.c57d405a.js";import"./user.service.5d6ec521.js";import"./useSlug.fdbf14df.js";import"./Input.d2784565.js";import"./Select.7b4ad9bd.js";import"./get_status.6c591513.js";const k={class:"intro-y flex flex-col sm:flex-row items-center mt-8"},P=i("h2",{class:"text-lg font-medium mr-auto"},"Mesa de Di\xE1logo",-1),G={key:0,class:"w-full sm:w-auto flex mt-4 sm:mt-0"},U={class:"intro-y box p-5 mt-5"},B={class:"flex items-center justify-center p-2 text-base"},ee=N({__name:"DialogueTablesView",setup(H){const l=M(),g=w(),v=S(),C=R(()=>String(v.name).split(".")[0]),E=()=>{g.push({name:`${C.value}.create`})};async function x(e){await l.destroy(e),o()}const D=[{text:"CONSECUTIVO",value:"consecutive"},{text:"FECHA",value:"activity_date",width:120},{text:"HORA INICIO",value:"start_time"},{text:"HORA FINAL",value:"final_hour"},{text:"NAC",value:"nac.name"},{text:"CREADO POR",value:"user.name"},{text:"CREACI\xD3N",value:"created_at"},{text:"ESTADO",value:"status"},{text:"ACCIONES",value:"actions"}],c=r([]);let a=r(1),d=r(0);const u=r({});async function o(){const e=Object.keys(u.value).length?new URLSearchParams(u.value):null;await l.get(a.value,e),c.value=l.data.all,d.value=l.data.count_page}function I(e){a.value=1,u.value=e,o()}const O=e=>{const{id:s,consecutive:m}=e;return{id:s,consecutive:m,sections:{general:{title:"Datos Generales",fields:{FECHA:e.activity_date,"HORA INICIO":e.start_time,"HORA FINAL":e.final_hour,NAC:e.nac.name}},description_workday:{title:"Descripci\xF3n de la Jornada",fields:{DESCRIPCI\u00D3N:e.workday_description,OBJETIVO:e.target_workday,"TEMA ABORDADO":e.theme,"AGENDA DEL DIA":e.schedule_day,"LOGROS Y DIFICULTADES":e.achievements_difficulties,ALERTAS:e.alerts}},multimedia:{title:"Multimedia",fields:{"DESARROLLO DEL DI\xC1LOGO CULTURAL (IMAGEN)":e.place_image1,"EVIDENCIA DE PARTICIPACI\xD3N (IMAGEN)":e.place_image2}},assistants:{title:"Asistentes Agregados",fields:{ASISTENTES:e.assistants.map(t=>({NOMBRE:t.assistant_name,C\u00C9DULA:t.assistant_document_number,CARGO:t.assistant_position,NAC:T.get_option_label("nacs",t.nac_id),TEL\u00C9FONO:t.assistant_phone,EMAIL:t.assistant_email}))}}}}};return h(async()=>{await o(),c.value.map(e=>({...e,actions:"Acciones"}))}),(e,s)=>{const m=F("v-pagination");return _(),p(b,null,[i("div",k,[P,n(f).dialoguetables.create()?(_(),p("div",G,[i("button",{class:"btn btn-primary shadow-md mr-2",onClick:E},"Crear Mesa de Di\xE1logo")])):y("",!0)]),i("div",U,[i("div",B,[A(m,{modelValue:n(a),"onUpdate:modelValue":[s[0]||(s[0]=t=>L(a)?a.value=t:a=t),o],pages:n(d),"range-size":1,"active-color":"#DCEDFF"},null,8,["modelValue","pages"])]),A(V,{headers:D,items:n(c),item_see_fnc:O,management_permissions:n(f).dialoguetables.crud_management(),label:"la mesa de dialogo","on-delete-fnc":x,onChange_status:s[1]||(s[1]=t=>o()),onChange_filter:I,server_options:{page:1,rowsPerPage:15}},null,8,["items","management_permissions"])])],64)}}});export{ee as default};
