import{d as D,v as y,r as l,D as L,f as d,g as E,h as c,l as i,k as T,i as v,M as F,F as M,u as P,q as w,E as b,e as V}from"./index.c93647e1.js";import{p as B}from"./psychosocialinstruction.service.f4da92bc.js";import{p as A}from"./permissions.c73d0fc1.js";import{_ as H}from"./BaseCrudPDF.669a02c7.js";import"./DatasheetFormat.bb093e19.js";import"./description.c57d405a.js";import"./user.service.5d6ec521.js";import"./useSlug.fdbf14df.js";import"./Input.d2784565.js";import"./Select.7b4ad9bd.js";import"./get_status.6c591513.js";const k={class:"intro-y flex flex-col sm:flex-row items-center mt-8"},U=c("h2",{class:"text-lg font-medium mr-auto"},"Instrucci\xF3n Psicosocial",-1),G={key:0,class:"w-full sm:w-auto flex mt-4 sm:mt-0"},j={class:"intro-y box mt-5 p-5"},J={class:"flex items-center justify-center p-2 text-base"},se=D({__name:"Index",setup(Y){const r=B(),O=P(),f=w(),C=y(()=>String(f.name).split(".")[0]),I=()=>{O.push({name:`${C.value}.create`})};async function R(e){await r.destroy(e),n()}const g=[{text:"CONSECUTIVO",value:"consecutive"},{text:"CREADO POR",value:"user.name"},{text:"FECHA",value:"activity_date",width:120},{text:"NAC",value:"nac.name"},{text:"HORA INICIO",value:"start_time"},{text:"HORA FINAL",value:"final_hour"},{text:"CREACI\xD3N",value:"created_at"},{text:"ESTADO",value:"status"},{text:"ACCIONES",value:"actions"}],u=l([]),x=e=>{const{id:s,consecutive:p}=e,o=e.monitors.map(t=>({ID:t.id,"NOMBRE COMPLETO":t.name,CI:t.email})),h=e.assistants.map(t=>({NOMBRE:t.assistant_name,CEDULA:t.assistant_document_number,EMAIL:t.assistant_email,TELEFONO:t.assistant_phone,CARGO:t.assistant_position}));return{id:s,consecutive:p,sections:{general:{title:"Datos Generales",fields:{FECHA:e.activity_date,NAC:b.get_option_label("nacs",e.nac_id),"HORA INICIO":e.start_time,"HORA FINAL":e.final_hour,"TEMAS A TRATAR":e.themes_day,OBJETIVO:e.objective_day,"DESARROLLO DE LOS TEMAS":e.development_themes,"CONCLUSIONES Y REFLEXIONES Y COMPROMISOS DE LA JORNADA":e.conclusions_reflections_commitments,"\xBFREPORTE ALERTAS PARA HACER SEGUIMIENTO? ":e.report_followup_alerts=="1"?"SI":"NO","IMAGEN DE LA ACTIVIDAD":e.development_activity_image,"IMAGEN DEL DESARROLLO":e.evidence_participation_image,MONITORES:o}},asistances:{title:"Datos de asistencia",fields:{ASISTENTES:h}}}}};let a=l(1),_=l(0);const m=l({});async function n(){const e=Object.keys(m.value).length?new URLSearchParams(m.value):null;await r.get(a.value,e),u.value=r.data.all,_.value=r.data.count_page}function N(e){a.value=1,m.value=e,n()}function S(){n()}return L(async()=>{await n(),u.value.map(e=>({...e,actions:"Acciones"}))}),(e,s)=>{const p=V("v-pagination");return d(),E(M,null,[c("div",k,[U,i(A).psychosocialinstructions.create()?(d(),E("div",G,[c("button",{class:"btn btn-primary shadow-md mr-2",onClick:I},"Crear una instrucci\xF3n psicosocial")])):T("",!0)]),c("div",j,[c("div",J,[v(p,{modelValue:i(a),"onUpdate:modelValue":[s[0]||(s[0]=o=>F(a)?a.value=o:a=o),S],pages:i(_),"range-size":1,"active-color":"#DCEDFF"},null,8,["modelValue","pages"])]),v(H,{headers:g,items:i(u),label:"la Instrucci\xF3n Psicosocial",item_see_fnc:x,management_permissions:i(A).psychosocialinstructions.crud_management(),"on-delete-fnc":R,onChange_status:s[1]||(s[1]=o=>n()),onChange_filter:N,server_options:{page:1,rowsPerPage:15}},null,8,["items","management_permissions"])])],64)}}});export{se as default};
