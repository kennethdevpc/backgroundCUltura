import{d as L,v as M,r as u,D as B,f,g as b,h as _,l as c,k as V,i as C,M as F,F as w,u as k,q as z,E as e,e as G}from"./index.c93647e1.js";import{i as j}from"./inscriptions.service.a838efc7.js";import{p as h}from"./permissions.c73d0fc1.js";import{_ as Z}from"./BaseCrudPDF.669a02c7.js";import"./DatasheetFormat.bb093e19.js";import"./description.c57d405a.js";import"./user.service.5d6ec521.js";import"./useSlug.fdbf14df.js";import"./Input.d2784565.js";import"./Select.7b4ad9bd.js";import"./get_status.6c591513.js";const q={class:"intro-y flex flex-col sm:flex-row items-center mt-8"},H=_("h2",{class:"text-lg font-medium mr-auto"},"Inscripciones",-1),$={key:0,class:"w-full sm:w-auto flex mt-4 sm:mt-0"},J={class:"intro-y box p-5 mt-5"},K={class:"flex items-center justify-center p-2 text-base"},ce=L({__name:"Index",setup(Q){const r=j(),N=k(),y=z(),v=M(()=>String(y.name).split(".")[0]),T=()=>{N.push({name:`${v.value}.create`})};async function R(i){r.destroy(i),await d()}const S=[{text:"CONSECUTIVO",value:"consecutive"},{text:"BENEFICIARIO",value:"benefiary.full_name"},{text:"DOCUMENTO",value:"benefiary.document_number"},{text:"ACUDIENTE",value:"attendant.full_name"},{text:"DOCUMENTO DE ACUDIENTE",value:"attendant.document_number"},{text:"CREADOR POR",value:"user.name"},{text:"ROL CREADOR",value:"role"},{text:"CREACI\xD3N",value:"created_at"},{text:"ESTADO",value:"status"},{text:"ACCIONES",value:"actions"}],p=u([]),x=i=>{var g,I;const{id:m,consecutive:D,benefiary:t,sociodemographic_characterization_benefiary:a,health_data_benefiary:l,attendant:n,sociodemographic_characterization_attendant:o,health_data_attendant:O}=i;return{id:m,consecutive:D,sections:{beneficiary:{title:"Beneficiario",fields:{"NOMBRE COMPLETO":t.full_name,VINCULACI\u00D3N:e.get_option_label("linkage_projects",t.linkage_project),GRUPO:(I=(g=t.group)==null?void 0:g.name)!=null?I:"","NOMBRE DE REFERIDO":t.referrer_name,"INSTITUCI\xD3N, ENTIDAD O REFERIDO":t.institution_entity_referred,"TIPO DE DOC":e.get_option_label("type_documents",t.type_document),"NUMERO DE DOC":t.document_number,NAC:e.get_option_label("nacs",t.nac_id),BARRIO:e.get_option_label("neighborhoods",t.neighborhood_id),"OTRO BARRIO":t.neighborhood_new,ZONA:e.get_option_label("zones",t.zone),ESTRATO:e.get_option_label("stratums",t.stratum),TEL\u00C9FONO:t.phone,EMAIL:t.email,IMAGEN:t.file}},beneficiary_socio:{title:"Beneficiario - Caracter\xEDsticas Sociodemograficas",fields:{GENERO:e.get_option_label("genders",a.gender),EDAD:a.age,"ACTUALMENTE ESTUDIA":a.decision_study==1?"SI":"NO","NIVEL EDUCATIVO ALCANZADO":e.get_option_label("educational_levels",a.educational_level),"PRESENTA DISCAPACIDAD":a.decision_disability==1?"SI":"NO","TIPO DE DISCAPACIDAD":e.get_option_label("disability_types",a.disability_type),"TIPO DE ETNIA":e.get_option_label("ethnicities",a.ethnicity),CONDICI\u00D3N:e.get_option_label("conditions",a.condition)}},beneficiary_health_data:{title:"Beneficiario - Datos de salud",fields:{"REGIMEN DE SALUD":e.get_option_label("medical_services",l.medical_service),EPS:e.get_option_label("entity_names",l.entity_name_id),"OTRO EPS":l.other_entity_name,"ESTADO DE SALUD":e.get_option_label("health_conditions",l.health_condition)}},attendant:{title:"Acudiente",fields:{PARENTESCO:e.get_option_label("relationships",n.relationship),"NOMBRE COMPLETO":n.full_name,"TIPO DE DOC":e.get_option_label("type_documents",n.type_document),"NUMERO DE DOC":n.document_number,ZONA:e.get_option_label("zones",n.zone),TEL\u00C9FONO:n.phone,EMAIL:n.email}},attendant_socio:{title:"Acudiente - Caracter\xEDsticas Sociodemograficas",fields:{GENERO:e.get_option_label("genders",a.gender),EDAD:o.age,"ACTUALMENTE ESTUDIA":o.decision_study==1?"SI":"NO","NIVEL EDUCATIVO ALCANZADO":e.get_option_label("educational_levels",o.educational_level),"PRESENTA DISCAPACIDAD":o.decision_disability==1?"SI":"NO","TIPO DE DISCAPACIDAD":e.get_option_label("disability_types",o.disability_type),"TIPO DE ETNIA":e.get_option_label("ethnicities",o.ethnicity),CONDICI\u00D3N:e.get_option_label("conditions",o.condition)}},attendant_health_data:{title:"Acudiente - Datos de salud",fields:{"REGIMEN DE SALUD":e.get_option_label("medical_services",O.medical_service),EPS:e.get_option_label("entity_names",O.entity_name_id),"OTRO EPS":l.other_entity_name,"ESTADO DE SALUD":e.get_option_label("health_conditions",O.health_condition)}}}}};let s=u(1),A=u(0);const E=u({});async function d(){const i=Object.keys(E.value).length?new URLSearchParams(E.value):null;await r.get(s.value,i).then(()=>{p.value=r.data.all,A.value=r.data.count_page})}function P(i){s.value=1,E.value=i,d()}function U(){d()}return B(async()=>{await d(),p.value.map(i=>({...i,actions:"Acciones"}))}),(i,m)=>{const D=G("v-pagination");return f(),b(w,null,[_("div",q,[H,c(h).inscriptions.create()?(f(),b("div",$,[_("button",{class:"btn btn-primary shadow-md mr-2",onClick:T}," Hacer una inscripci\xF3n ")])):V("",!0)]),_("div",J,[_("div",K,[C(D,{modelValue:c(s),"onUpdate:modelValue":[m[0]||(m[0]=t=>F(s)?s.value=t:s=t),U],pages:c(A),"range-size":1,"active-color":"#DCEDFF"},null,8,["modelValue","pages"])]),C(Z,{headers:S,items:c(p),item_see_fnc:x,label:"la inscripci\xF3n",management_permissions:c(h).inscriptions.crud_management(),"on-delete-fnc":R,onChange_filter:P},null,8,["items","management_permissions"])])],64)}}});export{ce as default};
