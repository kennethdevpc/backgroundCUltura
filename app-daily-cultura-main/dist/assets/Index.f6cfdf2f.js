import{d as E,v as h,r as l,D as T,f as d,g as _,h as o,l as n,k as L,i as v,M as y,F as V,u as w,q as P,e as S}from"./index.c93647e1.js";import{p as b}from"./parentschool.service.709bbfdd.js";import{p as C}from"./permissions.c73d0fc1.js";import{_ as U}from"./BaseCrudPDF.669a02c7.js";import"./DatasheetFormat.bb093e19.js";import"./description.c57d405a.js";import"./user.service.5d6ec521.js";import"./useSlug.fdbf14df.js";import"./Input.d2784565.js";import"./Select.7b4ad9bd.js";import"./get_status.6c591513.js";const F={class:"intro-y flex flex-col sm:flex-row items-center mt-8"},H=o("h2",{class:"text-lg font-medium mr-auto"},"Escuela de Padres",-1),k={key:0,class:"w-full sm:w-auto flex mt-4 sm:mt-0"},M={class:"intro-y box p-5 mt-5"},B={class:"flex items-center justify-center p-2 text-base"},ee=E({__name:"Index",setup(j){const r=b(),f=w(),O=P(),A=h(()=>String(O.name).split(".")[0]),I=()=>{f.push({name:`${A.value}.create`})};async function g(e){await r.destroy(e),s()}const x=[{text:"CONSECUTIVO",value:"consecutive"},{text:"CREADO POR",value:"user.name"},{text:"HORA INICIO",value:"start_time"},{text:"HORA FINAL",value:"final_time"},{text:"LUGAR DE ATENCI\xD3N",value:"place_attention"},{text:"CONTACTO",value:"contact"},{text:"MONITOR",value:"monitor.name"},{text:"CREACI\xD3N",value:"created_at"},{text:"ESTADO",value:"status"},{text:"ACCIONES",value:"actions"}],i=l([]);let t=l(1),p=l(0);const c=l({});async function s(){const e=Object.keys(c.value).length?new URLSearchParams(c.value):null;await r.get(t.value,e),i.value=r.data.all,p.value=r.data.count_page}function N(e){t.value=1,c.value=e,s()}function R(){s()}const D=e=>{const{id:a,consecutive:u}=e;return{id:a,consecutive:u,sections:{general:{title:"Datos Generales",fields:{FECHA:e.date,"MONITOR CULTURAL":e.monitor.name,"HORA INICIO":e.start_time,"HORA FINAL":e.final_time,"LUGAR DE ATENCI\xD3N":e.place_attention,CONTACTO:e.contact,OBJETIVO:e.objective,DESARROLLO:e.development,CONCLUSIONES:e.conclusions}},multimedia:{title:"Multimedia",fields:{"DESARROLLO DE LA ACTIVIDAD ARCHIVO":e.development_activity_image,"EVIDENCIA DE PARTICIPACI\xD3N ARCHIVO":e.evidence_participation_image}}}}};return T(async()=>{await s(),i.value.map(e=>({...e,actions:"Acciones"}))}),(e,a)=>{const u=S("v-pagination");return d(),_(V,null,[o("div",F,[H,n(C).parentschools.create()?(d(),_("div",k,[o("button",{class:"btn btn-primary shadow-md mr-2",onClick:I}," Crear escuela de padres ")])):L("",!0)]),o("div",M,[o("div",B,[v(u,{modelValue:n(t),"onUpdate:modelValue":[a[0]||(a[0]=m=>y(t)?t.value=m:t=m),R],pages:n(p),"range-size":1,"active-color":"#DCEDFF"},null,8,["modelValue","pages"])]),v(U,{headers:x,items:n(i),label:"la escuela de padre",management_permissions:n(C).parentschools.crud_management(),item_see_fnc:D,"on-delete-fnc":g,onChange_status:a[1]||(a[1]=m=>s()),onChange_filter:N,server_options:{page:1,rowsPerPage:15}},null,8,["items","management_permissions"])])],64)}}});export{ee as default};
