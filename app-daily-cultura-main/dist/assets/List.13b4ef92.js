import{d as I,r as c,au as N,D as F,f as v,g as f,h as m,l as i,i as _,w as P,j as R,k as V,M as T,F as y,E as x,e as D}from"./index.c93647e1.js";import{_ as w}from"./BaseCrud.3eb21af2.js";import{p as b}from"./permissions.c73d0fc1.js";import{_ as B}from"./ToCreate.df149aaf.js";import{m as L}from"./methodologicalAccompaniments.service.70554991.js";import"./DatasheetFormat.bb093e19.js";import"./description.c57d405a.js";import"./user.service.5d6ec521.js";import"./useSlug.fdbf14df.js";import"./Input.d2784565.js";import"./Select.7b4ad9bd.js";import"./get_status.6c591513.js";const M={class:"intro-y flex flex-col sm:flex-row items-center mt-8"},k=m("h2",{class:"text-lg font-medium mr-auto"},"Acompa\xF1amiento metodol\xF3gico",-1),U={key:0,class:"w-full sm:w-auto flex mt-4 sm:mt-0"},j={class:"intro-y box mt-5 p-5"},G={class:"flex items-center justify-center p-2 text-base"},ae=I({__name:"List",setup($){const r=c([]),{hasPermission:C}=N(),l=L();let t=c(1),d=c(0);const u=c({});async function n(){const e=Object.keys(u.value).length?new URLSearchParams(u.value):null;await l.get(t.value,e),r.value=l.data.all,d.value=l.data.count_page}function A(e){t.value=1,u.value=e,n()}function E(){n()}F(async()=>{await n(),r.value.map(e=>({...e,actions:"Acciones"}))});async function O(e){await l.destroy(e),n()}const h=[{text:"CONSECUTIVO",value:"consecutive"},{text:"NAC",value:"nac.name"},{text:"ASPECTOS",value:"aspects"},{text:"ROLES",value:"roles_associate"},{text:"CREADOR POR",value:"user.name"},{text:"FECHA CREACI\xD3N",value:"created_at"},{text:"ESTADO",value:"status"},{text:"ACCIONES",value:"actions"}],S=e=>{const{id:a,consecutive:p}=e;var o="";e.aspects.forEach(s=>o+=x.get_option_label("aspects",s)+",");var g="";return e.roles_associate.forEach(s=>g+=x.get_option_label("roles_display",s)+","),{id:a,consecutive:p,sections:{general:{title:"Datos Generalesx",fields:{CONSECUTIVO:e.consecutive,FECHA:e.date,OTROS:e.others,OBJETIVO_VISITA:e.objective_visit,ASPECTOS:o,ROLES:g,ASPECTOS_PREVIOS:e.aspects_comments,OBSERVACI\u00D3N:e.comments}},multimedia:{title:"Multimedia",fields:{"IMAGEN I":e.development_activity_image,"IMAGEN II":e.evidence_participation_image}},aggregates:{title:"Agregados",fields:{"BENEFICIARIOS (TABLA)":e.assistants.map(s=>({"NOMBRE COMPLETO":s.monitor_fullname,C\u00C9DULA:s.document_number}))}}}}};return(e,a)=>{const p=D("v-pagination");return v(),f(y,null,[m("div",M,[k,i(C)("methodologicalAccompaniments.create")?(v(),f("div",U,[_(B,{to:{name:"methodologicalAccompaniments.create"}},{default:P(()=>[R(" Crear un acompa\xF1amiento metodol\xF3gico ")]),_:1},8,["to"])])):V("",!0)]),m("div",j,[m("div",G,[_(p,{modelValue:i(t),"onUpdate:modelValue":[a[0]||(a[0]=o=>T(t)?t.value=o:t=o),E],pages:i(d),"range-size":1,"active-color":"#DCEDFF"},null,8,["modelValue","pages"])]),_(w,{items:i(r),headers:h,item_see_fnc:S,management_permissions:i(b).methodologicalAccompaniments.crud_management(),label:"Acompa\xF1amiento metodol\xF3gico","on-delete-fnc":O,onChange_status:a[1]||(a[1]=o=>n()),onChange_filter:A,server_options:{page:1,rowsPerPage:15}},null,8,["items","management_permissions"])])],64)}}});export{ae as default};
