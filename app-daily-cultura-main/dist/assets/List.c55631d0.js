import{d as O,v as N,r as i,D as w,f as d,g as f,h as n,l as o,k as b,i as _,M as I,F as P,u as S,q as V,e as k}from"./index.c93647e1.js";import{_ as F}from"./BaseCrud.3eb21af2.js";import{p as v}from"./permissions.c73d0fc1.js";import{m as U}from"./monitoring_report.service.39dc3e50.js";import"./DatasheetFormat.bb093e19.js";import"./description.c57d405a.js";import"./user.service.5d6ec521.js";import"./useSlug.fdbf14df.js";import"./Input.d2784565.js";import"./Select.7b4ad9bd.js";import"./get_status.6c591513.js";const M={class:"intro-y flex flex-col sm:flex-row items-center mt-8"},T=n("h2",{class:"text-lg font-medium mr-auto"},"Informe de seguimiento",-1),B={key:0,class:"w-full sm:w-auto flex mt-4 sm:mt-0"},G={class:"intro-y box mt-5 p-5"},j={class:"flex items-center justify-center p-2 text-base"},ee=O({__name:"List",setup(H){const r=U(),g=S(),C=V(),x=N(()=>String(C.name).split(".")[0]),D=()=>{g.push({name:`${x.value}.create`})};async function h(e){await r.destroy(e),s()}const E=[{text:"CONSECUTIVO",value:"consecutive"},{text:"FECHA CARGA DE DOCUMENTO",value:"date"},{text:"CREADO POR",value:"user.name"},{text:"CREACI\xD3N",value:"created_at"},{text:"ESTADO",value:"status"},{text:"ACCIONES",value:"actions"}],m=i([]),R=e=>{const{id:a,consecutive:c}=e;return{id:a,consecutive:c,sections:{general:{title:"Datos Generales",fields:{"FECHA CARGA":e.date,DOCUMENTO:e.file,DESCRIPCI\u00D3N:e.description}}}}};let t=i(1),p=i(0);const l=i({});async function s(){const e=Object.keys(l.value).length?new URLSearchParams(l.value):null;await r.get(t.value,e),m.value=r.data.all,p.value=r.data.count_page}function y(e){t.value=1,l.value=e,s()}function A(){s()}return w(async()=>{await s(),m.value.map(e=>({...e,actions:"Acciones"}))}),(e,a)=>{const c=k("v-pagination");return d(),f(P,null,[n("div",M,[T,o(v).monitoringReports.create()?(d(),f("div",B,[n("button",{class:"btn btn-primary shadow-md mr-2",onClick:D}," Crear un Informe ")])):b("",!0)]),n("div",G,[n("div",j,[_(c,{modelValue:o(t),"onUpdate:modelValue":[a[0]||(a[0]=u=>I(t)?t.value=u:t=u),A],pages:o(p),"range-size":1,"active-color":"#DCEDFF"},null,8,["modelValue","pages"])]),_(F,{headers:E,items:o(m),item_see_fnc:R,management_permissions:o(v).monitoringReports.crud_management(),label:"el informe","on-delete-fnc":h,onChange_status:a[1]||(a[1]=u=>s()),onChange_filter:y,server_options:{page:1,rowsPerPage:15}},null,8,["items","management_permissions"])])],64)}}});export{ee as default};
