import{d as N,au as T,a as L,v as p,r as i,D as P,f as d,g as E,h as r,l as o,i as A,w as h,j as F,k as y,M as V,F as M,u as b,q as w,E as U,e as B}from"./index.c93647e1.js";import{_ as G}from"./BaseCrud.3eb21af2.js";import{p as H}from"./permissions.c73d0fc1.js";import{b as I}from"./strengthening_monitoring.service.a0fc3c69.js";import{_ as k}from"./ToCreate.df149aaf.js";import"./DatasheetFormat.bb093e19.js";import"./description.c57d405a.js";import"./user.service.5d6ec521.js";import"./useSlug.fdbf14df.js";import"./Input.d2784565.js";import"./Select.7b4ad9bd.js";import"./get_status.6c591513.js";const j={class:"intro-y flex flex-col sm:flex-row items-center mt-8"},J=r("h2",{class:"text-lg font-medium mr-auto"},"Fortalecimiento seguimiento",-1),$={key:0,class:"w-full sm:w-auto flex mt-4 sm:mt-0"},q={class:"intro-y box mt-5 p-5"},z={class:"flex items-center justify-center p-2 text-base"},re=N({__name:"List",setup(Y){const C=I(),{hasPermission:O}=T();L();const l=I();b();const g=w();p(()=>String(g.name).split(".")[0]);async function v(e){await C.destroy(e),s()}const f=[{text:"CONSECUTIVO",value:"consecutive"},{text:"USUARIO",value:"user_id"},{text:"FECHA",value:"activity_date",width:120},{text:"HORA INICIO",value:"start_time"},{text:"HORA FINAL",value:"final_hour"},{text:"NAC",value:"nac.name"},{text:"CREACI\xD3N",value:"created_at"},{text:"ESTADO",value:"status"},{text:"ACCIONES",value:"actions"}],c=i([]),S=e=>{const{id:a,consecutive:m,roles:n}=e,x=p(()=>n[0].name);return{id:a,consecutive:m,sections:{general:{title:"Datos Generales",fields:{NAC:e.nac.name,ROL:x.value,USUARIO:U.get_option_label("users_table",e.user.id),FECHA:e.activity_date,"HORA INICIO":e.start_time,"HORA FINAL":e.final_hour,LUGAR:e.place}},development:{title:"DESARROLLO DE LA VISITA",fields:{"OBJETIVOS ESTRAT\xC9GICOS DEL \xC1REA":e.strategic_objectives_area,"PROP\xD3SITO DE LA VISITA":e.purpose_visit}},diagnostic:{title:"DIAGN\xD3STICO INICIAL",fields:{"TEM\xC1TICAS ABORDADAS":e.topics_covered,"PERCEPCI\xD3N DE LOS PARTICIPANTES FRENTE A LAS ACTIVIDADES DESARROLLADAS POR EL \xC1REA":e.participants_perception,"DIFICULTADES O PROBLEM\xC1TICAS IDENTIFICADAS":e.problems_identified,"RECOMENDACIONES Y ACCIONES DE MEJORA PROPUESTAS POR LOS PARTICIPANTES ":e.recommendations_actions,"PERCEPCIONES/COMENTARIOS/AN\xC1LISIS FRENTE AL AVANCE DEL PROCESO":e.comments_analysis}},multimedia:{title:"Multimedia",fields:{"IMAGEN DESARROLLO":e.development_activity_image,"IMAGEN EVIDENCIA DE PARTICIPACI\xD3N":e.evidence_participation_image}}}}};let t=i(1),_=i(0);const u=i({});async function s(){const e=Object.keys(u.value).length?new URLSearchParams(u.value):null;await l.get(t.value,e),c.value=l.data.all,_.value=l.data.count_page}function R(e){t.value=1,u.value=e,s()}function D(){s()}return P(async()=>{await s(),c.value.map(e=>({...e,actions:"Acciones"}))}),(e,a)=>{const m=B("v-pagination");return d(),E(M,null,[r("div",j,[J,o(O)("strengtheningOfMonitorings.create")?(d(),E("div",$,[A(k,{to:{name:"strengtheningOfMonitorings.create"}},{default:h(()=>[F(" Crear una Fortalecimiento seguimiento ")]),_:1},8,["to"])])):y("",!0)]),r("div",q,[r("div",z,[A(m,{modelValue:o(t),"onUpdate:modelValue":[a[0]||(a[0]=n=>V(t)?t.value=n:t=n),D],pages:o(_),"range-size":1,"active-color":"#DCEDFF"},null,8,["modelValue","pages"])]),A(G,{headers:f,items:o(c),item_see_fnc:S,management_permissions:o(H).strengthening_monitorings.crud_management(),label:"Fortalecimiento seguimiento","on-delete-fnc":v,onChange_status:a[1]||(a[1]=n=>s()),onChange_filter:R,server_options:{page:1,rowsPerPage:15}},null,8,["items","management_permissions"])])],64)}}});export{re as default};
