import{d as O,r as l,au as N,D as I,f as p,g as v,h as r,l as s,i as d,w as R,j as S,k as D,M as L,F,E as _,e as T}from"./index.c93647e1.js";import{_ as V}from"./BaseCrud.3eb21af2.js";import{p as w}from"./permissions.c73d0fc1.js";import{_ as y}from"./ToCreate.df149aaf.js";import{m as M}from"./methodologicalStrengthenings.services.4e8313a0.js";import"./DatasheetFormat.bb093e19.js";import"./description.c57d405a.js";import"./user.service.5d6ec521.js";import"./useSlug.fdbf14df.js";import"./Input.d2784565.js";import"./Select.7b4ad9bd.js";import"./get_status.6c591513.js";const P={class:"intro-y flex flex-col sm:flex-row items-center mt-8"},U=r("h2",{class:"text-lg font-medium mr-auto"},"Fortalecimiento metodol\xF3gico",-1),b={key:0,class:"w-full sm:w-auto flex mt-4 sm:mt-0"},B={class:"intro-y box mt-5 p-5"},k={class:"flex items-center justify-center p-2 text-base"},ee=O({__name:"List",setup(H){const m=l([]),{hasPermission:f}=N(),i=M();let t=l(1),g=l(0);const c=l({});async function n(){const e=Object.keys(c.value).length?new URLSearchParams(c.value):null;await i.get(t.value,e),m.value=i.data.all,g.value=i.data.count_page}function C(e){t.value=1,c.value=e,n()}function x(){n()}I(async()=>{await n(),m.value.map(e=>({...e,actions:"Acciones"}))});async function E(e){await i.destroy(e),n()}const h=[{text:"CONSECUTIVO",value:"consecutive"},{text:"NAC",value:"nac.name"},{text:"DERECHO CULTURAL",value:"cultural_right.name"},{text:"ORIENTACI\xD3N",value:"orientation.name"},{text:"LINEAMIENTO",value:"lineament"},{text:"VALOR",value:"value_name"},{text:"CREADOR POR",value:"user.name"},{text:"FECHA CREACI\xD3N",value:"created_at"},{text:"ESTADO",value:"status"},{text:"ACCIONES",value:"actions"}],A=e=>{const{id:a,consecutive:u}=e;return{id:a,consecutive:u,sections:{general:{title:"Datos Generales",fields:{CONSECUTIVO:e.consecutive,FECHA:e.date,"DERECHO CULTURAL":_.get_option_label("cultural_rights",e.cultural_right_id),LINEAMIENTOS:_.get_option_label("lineaments",e.lineament_id),ORIENTACIONES:_.get_option_label("orientations",e.orientation_id),VALOR:e.value_name}},multimedia:{title:"Multimedia",fields:{"IMAGEN I":e.development_activity_image,"IMAGEN II":e.evidence_participation_image}},aggregates:{title:"Agregados",fields:{"BENEFICIARIOS (TABLA)":e.assistants.map(o=>({"NOMBRE COMPLETO":o.monitor_fullname,C\u00C9DULA:o.document_number}))}}}}};return(e,a)=>{const u=T("v-pagination");return p(),v(F,null,[r("div",P,[U,s(f)("methodologicalStrengthenings.create")?(p(),v("div",b,[d(y,{to:{name:"methodologicalStrengthenings.create"}},{default:R(()=>[S(" Crear un fortalecimiento metodol\xF3gico ")]),_:1},8,["to"])])):D("",!0)]),r("div",B,[r("div",k,[d(u,{modelValue:s(t),"onUpdate:modelValue":[a[0]||(a[0]=o=>L(t)?t.value=o:t=o),x],pages:s(g),"range-size":1,"active-color":"#DCEDFF"},null,8,["modelValue","pages"])]),d(V,{items:s(m),headers:h,item_see_fnc:A,management_permissions:s(w).methodologicalStrengthenings.crud_management(),label:"Fortalecimiento metodol\xF3gico","on-delete-fnc":E,onChange_status:a[1]||(a[1]=o=>n()),onChange_filter:C,server_options:{page:1,rowsPerPage:15}},null,8,["items","management_permissions"])])],64)}}});export{ee as default};
