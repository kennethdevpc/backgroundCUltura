import{m as R,s as x,b as T,H as G,r as F,v as L,D as q,E as w,f as j,g as P,i as s,w as z,j as J,t as K,l as e,y as Q,k as W,h as o,ad as X,F as Y,q as Z,an as ee}from"./index.c93647e1.js";import{m as te}from"./managermonitoring.service.c4ec7f71.js";import{c as ae}from"./generals.service.ee73141b.js";import{u as le}from"./index.esm.8471a966.js";import{_ as p}from"./Input.d2784565.js";import{_ as I}from"./Select.7b4ad9bd.js";import{_ as M}from"./Textarea.8cc31183.js";import{_ as y}from"./Radio.33857de6.js";import{r,d as S}from"./validations.9fff8c5b.js";import{_ as oe}from"./Management.8f9978fe.js";import{p as $}from"./permissions.c73d0fc1.js";import{s as ie}from"./scroll.6a87917e.js";import{_ as se}from"./FormHeader.f0e8692c.js";import"./index.esm.c98934a4.js";import"./useSlug.fdbf14df.js";import"./StateHeader.5dfd959d.js";import"./get_status.6c591513.js";import"./BaseBackButton.438a649f.js";const re=R("managermonitoring",{state:()=>({form:{consecutive:"",user_id:"",activity_date:"",start_time:"",final_hour:"",target_tracking:"",nac_id:"",cultural_process:"",cultural_guidelines:"",cultural_communication:"",difficulty_cultural_process:"",proposal_improvement:""},form_rules:{consecutive:{},user_id:{required:r},activity_date:{required:r},start_time:{required:r,checkMinMaxHours:S("start_time","final_hour")},final_hour:{required:r,checkMinMaxHours:S("start_time","final_hour")},target_tracking:{required:r},nac_id:{required:r},cultural_process:{required:r},cultural_guidelines:{required:r},cultural_communication:{required:r},difficulty_cultural_process:{required:r},proposal_improvement:{required:r}},form_options:{cultural_process:[{value:"1",text:"1"},{value:"2",text:"2"},{value:"3",text:"3"},{value:"4",text:"4"},{value:"5",text:"5"}],cultural_guidelines:[{value:"1",text:"1"},{value:"2",text:"2"},{value:"3",text:"3"},{value:"4",text:"4"},{value:"5",text:"5"}],cultural_communication:[{value:"1",text:"1"},{value:"2",text:"2"},{value:"3",text:"3"},{value:"4",text:"4"},{value:"5",text:"5"}]},validator:{generalData:!0}}),getters:{isValid:c=>!!c.validator.generalData,transpiledData(){return{...this.form}}},actions:{toggleGeneralData(c){this.$patch(d=>{d.validator.generalData=c})}}}),ne={class:"intro-y box mt-5"},ue=["disabled"],de=["onSubmit"],ce={id:"GeneralData",class:"flex flex-col lg:grid lg:grid-cols-2 xl:grid xl:grid-cols-3 gap-6 justify-evenly mb-8"},me={class:"w-full"},_e={class:"w-full relative"},pe={class:"w-full"},fe={class:"w-full"},ve={class:"w-full"},ge={class:"w-full"},ye={id:"Descriptions",class:"mb-8"},be=o("div",{class:"flex items-center mb-8"},[o("h3",{class:"intro-y text-lg font-medium mr-auto"}," Evaluaci\xF3n y retroalimentaci\xF3n metodol\xF3gica * ")],-1),Ve={class:"grid grid-cols-1 gap-6 justify-evenly mb-8"},he={class:"w-full"},xe={class:"w-full"},we={class:"w-full"},je={class:"grid grid-cols-1 gap-6 justify-evenly"},Ie={class:"w-full"},Me={class:"w-full"},Se={class:"flex justify-center"},$e=["disabled"],Qe={__name:"ManagerMonitoringNew",setup(c){const d=Z(),n=re(),{form:a,form_rules:k,form_options:f}=x(n),i=le(k,a,{$autoDirty:!0,$lazy:!0}),D=T(),{options:N}=x(D),b=N.value,u=te(),V=ae(),m=G({status:"",reject_message:""}),_=F(!1),v=async()=>await V.getConsecutive("manager_monitorings","IMSG").then(()=>{a.value.consecutive=V.data.value}),O=async()=>await u.getOne(d.params.id),g=L(()=>!!d.params.id);q(async()=>{if(d.params.id){n.$reset(),await O().catch(()=>{w.not_found_by_id()});const{id:h,created_at:t,updated_at:l,user:ke,status:E,reject_message:H,nac:De,monitor_id:C,...A}=u.data.one;n.$patch(B=>{Object.assign(B.form,{...A,user_id:C})}),m.status=E,m.reject_message=H}else n.$reset(),await v()});const U=async()=>{await i.value.$validate()?(_.value=!0,g.value?(await u.update(u.data.one.id,n.transpiledData).finally(()=>{_.value=!1}),n.$reset()):await v().finally(()=>{u.create(n.transpiledData).then(async t=>{t.status==201&&(n.$reset(),i.value.$reset(),ie(),await v())}).finally(()=>{_.value=!1})})):ee.fire("Validaci\xF3n","Por favor valide los campos solicitados.","error")};return(h,t)=>(j(),P(Y,null,[s(se,{state:{consecutive:e(a).consecutive,status:e(m).status,reject_message:e(m).reject_message}},{default:z(()=>[J(K(e(g)?"Edici\xF3n de Seguimiento":"Seguimiento de Gesti\xF3n Cultural"),1)]),_:1},8,["state"]),e(g)&&e($).managermonitorings.management()?(j(),Q(oe,{key:0,class:"mt-5",onSend:t[0]||(t[0]=l=>e(w).methods.send_management("manager_monitorings",e(u).data.one.id,l))})):W("",!0),o("div",ne,[o("fieldset",{disabled:e($).managermonitorings.no_edit()},[o("form",{onSubmit:X(U,["prevent"]),class:"px-5 sm:px-10 py-10 border-t border-slate-200/60 dark:border-darkmode-400"},[o("section",ce,[o("div",me,[s(I,{required:"",label:"MONITOR *",tooltip:"Ingrese el MONITOR",placeholder:"Seleccione",name:"user_id",modelValue:e(a).user_id,"onUpdate:modelValue":t[1]||(t[1]=l=>e(a).user_id=l),options:e(b).monitors,validator:e(i)},null,8,["modelValue","options","validator"])]),o("div",_e,[s(p,{type:"date",label:"FECHA *",tooltip:"Ingrese la fecha",placeholder:"Seleccione",name:"activity_date",modelValue:e(a).activity_date,"onUpdate:modelValue":t[2]||(t[2]=l=>e(a).activity_date=l),validator:e(i)},null,8,["modelValue","validator"])]),o("div",pe,[s(p,{type:"time",label:"HORA INICIO *",tooltip:"Ingrese la hora de inicio",placeholder:"Hora inicio",name:"start_time",modelValue:e(a).start_time,"onUpdate:modelValue":t[3]||(t[3]=l=>e(a).start_time=l),validator:e(i)},null,8,["modelValue","validator"])]),o("div",fe,[s(p,{type:"time",label:"HORA FINAL *",tooltip:"Ingrese la hora final",placeholder:"Hora final",name:"final_hour",min:e(a).start_time,modelValue:e(a).final_hour,"onUpdate:modelValue":t[4]||(t[4]=l=>e(a).final_hour=l),validator:e(i)},null,8,["min","modelValue","validator"])]),o("div",ve,[s(p,{type:"text",label:"OBJETIVO DEL SEGUIMIENTO *",tooltip:"Ingrese el nombre del objetivo",placeholder:"Nombre del objetivo",name:"target_tracking",modelValue:e(a).target_tracking,"onUpdate:modelValue":t[5]||(t[5]=l=>e(a).target_tracking=l),validator:e(i)},null,8,["modelValue","validator"])]),o("div",ge,[s(I,{label:"NAC *",tooltip:"Ingrese el NAC",placeholder:"Seleccione",name:"nac_id",modelValue:e(a).nac_id,"onUpdate:modelValue":t[6]||(t[6]=l=>e(a).nac_id=l),options:e(b).nacs,validator:e(i)},null,8,["modelValue","options","validator"])])]),o("section",ye,[be,o("div",Ve,[o("div",he,[s(y,{class:"flex items-center justify-end gap-6",label:"La ficha pedag\xF3gica da cuenta del proceso cultural (manifestaci\xF3n cultural)a trabajar en el mes *",tooltip:"",name:"cultural_process",modelValue:e(a).cultural_process,"onUpdate:modelValue":t[7]||(t[7]=l=>e(a).cultural_process=l),options:e(f).cultural_process,validator:e(i)},null,8,["modelValue","options","validator"])]),o("div",xe,[s(y,{class:"flex items-center justify-end gap-6",label:"La ficha Pedag\xF3gica refleja los derechos culturales y lineamientos a trabajar en el mes *",tooltip:"",name:"cultural_guidelines",modelValue:e(a).cultural_guidelines,"onUpdate:modelValue":t[8]||(t[8]=l=>e(a).cultural_guidelines=l),options:e(f).cultural_guidelines,validator:e(i)},null,8,["modelValue","options","validator"])]),o("div",we,[s(y,{class:"flex items-center justify-end gap-6",label:"El monitor cultural maneja una comunicaci\xF3n acorde a las particularidades de los beneficiarios *",tooltip:"",name:"cultural_communication",modelValue:e(a).cultural_communication,"onUpdate:modelValue":t[9]||(t[9]=l=>e(a).cultural_communication=l),options:e(f).cultural_communication,validator:e(i)},null,8,["modelValue","options","validator"])])]),o("div",je,[o("div",Ie,[s(M,{label:"Mencione un aspecto evidenciado *",tooltip:"Ingrese la dificultad",placeholder:"",name:"difficulty_cultural_process",modelValue:e(a).difficulty_cultural_process,"onUpdate:modelValue":t[10]||(t[10]=l=>e(a).difficulty_cultural_process=l),validator:e(i),rows:"3"},null,8,["modelValue","validator"])]),o("div",Me,[s(M,{label:"Mencione una propuesta para el mejoramiento metodol\xF3gica y pedag\xF3gico de la ficha *",tooltip:"Ingrese la propuesta",placeholder:"",name:"proposal_improvement",modelValue:e(a).proposal_improvement,"onUpdate:modelValue":t[11]||(t[11]=l=>e(a).proposal_improvement=l),validator:e(i),rows:"3"},null,8,["modelValue","validator"])])])]),o("div",Se,[o("button",{disabled:e(_),type:"submit",class:"btn btn-primary w-24 ml-2"}," Ingresar ",8,$e)])],40,de)],8,ue)])],64))}};export{Qe as default};
