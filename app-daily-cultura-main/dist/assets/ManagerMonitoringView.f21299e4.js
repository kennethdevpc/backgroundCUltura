import{d as S,v as M,r as l,D as U,f as d,g as p,h as s,l as o,k as h,i as g,M as F,F as T,u as y,q as P,e as w,E as G}from"./index.c93647e1.js";import{m as V}from"./managermonitoring.service.c4ec7f71.js";import{p as C}from"./permissions.c73d0fc1.js";import{_ as H}from"./BaseCrudPDF.669a02c7.js";import"./DatasheetFormat.bb093e19.js";import"./description.c57d405a.js";import"./user.service.5d6ec521.js";import"./useSlug.fdbf14df.js";import"./Input.d2784565.js";import"./Select.7b4ad9bd.js";import"./get_status.6c591513.js";const b={class:"intro-y flex flex-col sm:flex-row items-center mt-8"},k=s("h2",{class:"text-lg font-medium mr-auto"},"Seguimiento de Gesti\xF3n Cultural",-1),B={key:0,class:"w-full sm:w-auto flex mt-4 sm:mt-0"},J={class:"intro-y box p-5 mt-5"},j={class:"flex items-center justify-center p-2 text-base"},ne=S({__name:"ManagerMonitoringView",setup($){const v=y(),E=P(),r=V(),f=M(()=>String(E.name).split(".")[0]),O=()=>{v.push({name:`${f.value}.create`})};async function I(e){await r.destroy(e).then(()=>{n()})}const x=[{text:"CONSECUTIVO",value:"consecutive"},{text:"MONITOR CULTURAL",value:"user.name"},{text:"FECHA",value:"activity_date",width:120},{text:"HORA INICIO",value:"start_time"},{text:"HORA FINAL",value:"final_hour"},{text:"NAC",value:"nac.name"},{text:"CREADO POR",value:"user.name"},{text:"CREACI\xD3N",value:"created_at"},{text:"ESTADO",value:"status"},{text:"ACCIONES",value:"actions"}],u=l([]);let t=l(1),A=l(0);const c=l({});async function n(){const e=Object.keys(c.value).length?new URLSearchParams(c.value):null;await r.get(t.value,e),u.value=r.data.all,A.value=r.data.count_page}function N(e){t.value=1,c.value=e,n()}const R=e=>{const{id:a,consecutive:m}=e;return{id:a,consecutive:m,sections:{general:{title:"Datos Generales",fields:{MONITOR:((D,L)=>{const _=G.get_monitor_by_id(D);return _!="No encontrad@"?_.monitor_fullname:L})(e.monitor_id,"No encontrad@"),FECHA:e.activity_date,"HORA INICIO":e.start_time,"HORA FINAL":e.final_hour,"OBJETIVO DEL SEGUIMIENTO":e.target_tracking,NAC:e.nac.name}},testing:{title:"Evaluaci\xF3n y Retroalimentaci\xF3n Metodol\xF3gica",fields:{"LA FICHA PEDAG\xD3GICA DA CUENTA DEL PROCESO CULTURAL (RANGO)":{max:5,value:e.cultural_process},"LA FICHA PEDAG\xD3GICA REFLEJA LOS DERECHOS CULTURALES Y LINEAMIENTOS (RANGO)":{max:5,value:e.cultural_guidelines},"EL MONITOR CULTURAL MANEJA UNA COMUNICACI\xD3N ACORDE A LAS PARTICULARIDADES DE LOS BENEFICIARIOS (RANGO)":{max:5,value:e.cultural_communication},"DIFICULTAD EVIDENCIADA":e.difficulty_cultural_process,"PROPUESTA PARA EL MEJORAMIENTO":e.proposal_improvement}}}}};return U(async()=>{await n(),u.value.map(e=>({...e,actions:"Acciones"}))}),(e,a)=>{const m=w("v-pagination");return d(),p(T,null,[s("div",b,[k,o(C).managermonitorings.create()?(d(),p("div",B,[s("button",{class:"btn btn-primary shadow-md mr-2",onClick:O},"Crear Seguimiento")])):h("",!0)]),s("div",J,[s("div",j,[g(m,{modelValue:o(t),"onUpdate:modelValue":[a[0]||(a[0]=i=>F(t)?t.value=i:t=i),n],pages:o(A),"range-size":1,"active-color":"#DCEDFF"},null,8,["modelValue","pages"])]),g(H,{headers:x,items:o(u),item_see_fnc:R,management_permissions:o(C).managermonitorings.crud_management(),label:"El seguimiento","on-delete-fnc":I,onChange_status:a[1]||(a[1]=i=>n()),onChange_filter:N,server_options:{page:1,rowsPerPage:15}},null,8,["items","management_permissions"])])],64)}}});export{ne as default};
