import{d as N,v as S,r as l,D as R,E as M,O as m,f as _,g as v,h as r,l as i,k as P,i as f,M as V,F as w,u as F,q as L,e as b}from"./index.c93647e1.js";import{_ as k}from"./BaseCrud.3eb21af2.js";import{p as A}from"./permissions.c73d0fc1.js";import{M as B}from"./methodologicalSheetsTwo.service.099bd407.js";import{c as U}from"./generals.service.ee73141b.js";import"./DatasheetFormat.bb093e19.js";import"./description.c57d405a.js";import"./user.service.5d6ec521.js";import"./useSlug.fdbf14df.js";import"./Input.d2784565.js";import"./Select.7b4ad9bd.js";import"./get_status.6c591513.js";import"./index.37cca9d1.js";const $={class:"intro-y flex flex-col sm:flex-row items-center mt-5"},j=r("h2",{class:"text-lg font-medium mr-auto"}," Ficha Metodol\xF3gica de Evaluaci\xF3n ",-1),J={key:0,class:"w-full sm:w-auto flex mt-4 sm:mt-0"},Y={class:"intro-y box mt-5 p-5"},G={class:"flex items-center justify-center p-2 text-base"},ie=N({__name:"MethodologicalSheetsTwo",setup(H){const c=B();U();const g=F(),E=L(),C=S(()=>String(E.name).split(".")[0]),D=()=>{g.push({name:`${C.value}.create`})};async function O(e){await c.destroy(e),s()}const h=[{text:"CONSECUTIVO",value:"consecutive"},{text:"FICHA",value:"datasheet",width:140},{text:"CREADO POR",value:"created_by.name"},{text:"FECHA",value:"date",width:200},{text:"TIPO ACTIVIDAD",value:"activity_type"},{text:"OBJETIVO ALCANZADO",value:"reached_target"},{text:"CREACI\xD3N",value:"created_at"},{text:"ESTADO",value:"status"},{text:"ACCIONES",value:"actions"}],u=l([]);let a=l(1),p=l(0);const d=l({});function x(e){a.value=1,d.value=e,s()}function y(){s()}async function s(){const e=Object.keys(d.value).length?new URLSearchParams(d.value):null;await c.get(a.value,e),u.value=c.data.all,p.value=c.data.count_page}const I=e=>{const{id:t,consecutive:o}=e;return{id:t,consecutive:o,sections:{general:{title:"Datos Generales",fields:{"TIPO ACTIVIDAD":e.activity_type,FECHA:e.date_range,"ACTORES CLAVES DE LA COMUNIDAD PARTICIPANTE":e.keyactors_participating_community,"OBJETIVO DEL PROCESO":e.objective_process,"\xBFSE ALCANZ\xD3 EL OBJETIVO?":e.reached_target,SUSTENTACI\u00D3N:e.sustein,"CAPACIDAD (NUMERO DE ASISTENTES)":e.number_attendees,GRUPO:e.group_beneficiaries}},multimedia:{title:"Multimedia",fields:{"IMAGEN (DESARROLLO DE LA JORNADA DE PACTO)":e.development_activity_image,"EVIDENCIA DE PARTICIPACI\xD3N":e.evidence_participation_image,"FOTO DEL DESARROLLO":e.aforo_pdf}}}}};return R(async()=>{const e=await s();u.value=e.map(t=>{const o=t!=null&&t.reached_target?"SI":"NO",n=M.get_option_label("activity_type",t.activity_type),T=`${m(t.date_ini).format("MMM-D")} a ${m(t.date_fin).format("MMM-D")} de ${m(t.date_fin).format("YYYY")}`;return{...t,reached_target:o,activity_type:n,date:T,actions:"Acciones"}})}),(e,t)=>{const o=b("v-pagination");return _(),v(w,null,[r("div",$,[j,i(A).sheetsOne.create()?(_(),v("div",J,[r("button",{class:"btn btn-primary shadow-md mr-2",onClick:D}," Crear ficha ")])):P("",!0)]),r("div",Y,[r("div",G,[f(o,{modelValue:i(a),"onUpdate:modelValue":[t[0]||(t[0]=n=>V(a)?a.value=n:a=n),y],pages:i(p),"range-size":1,"active-color":"#DCEDFF"},null,8,["modelValue","pages"])]),f(k,{item_see_fnc:I,headers:h,items:i(u),management_permissions:i(A).sheetsOne.crud_management(),label:"la ficha metodol\xF3gica","on-delete-fnc":O,onChange_status:t[1]||(t[1]=n=>s()),onChange_filter:x,server_options:{page:1,rowsPerPage:15}},null,8,["items","management_permissions"])])],64)}}});export{ie as default};
