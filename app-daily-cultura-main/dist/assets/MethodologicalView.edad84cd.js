import{d as R,v as h,r as u,D,f as p,g as C,h as s,l as o,k as S,i as f,M as L,F as y,u as F,q as M,E as d,e as b}from"./index.c93647e1.js";import{m as T}from"./methodological.service.26dd505e.js";import{p as A}from"./permissions.c73d0fc1.js";import{_ as V}from"./BaseCrudPDF.669a02c7.js";import"./DatasheetFormat.bb093e19.js";import"./description.c57d405a.js";import"./user.service.5d6ec521.js";import"./useSlug.fdbf14df.js";import"./Input.d2784565.js";import"./Select.7b4ad9bd.js";import"./get_status.6c591513.js";const w={class:"intro-y flex flex-col sm:flex-row items-center mt-8"},G=s("h2",{class:"text-lg font-medium mr-auto"},"Instrucci\xF3n Metodol\xF3gica",-1),P={key:0,class:"w-full sm:w-auto flex mt-4 sm:mt-0"},B={class:"intro-y box p-5 mt-5"},U={class:"flex items-center justify-center p-2 text-base"},Z=R({__name:"MethodologicalView",setup(k){const E=F(),g=M(),n=T(),x=h(()=>String(g.name).split(".")[0]),I=()=>{E.push({name:`${x.value}.create`})};async function O(e){await n.destroy(e),r()}const v=[{text:"CONSECUTIVO",value:"consecutive"},{text:"LUGAR",value:"place"},{text:"FECHA",value:"activity_date"},{text:"HORA INICIO",value:"start_time"},{text:"HORA FINAL",value:"final_hour"},{text:"EXPERTICIA",value:"expertise.name"},{text:"NAC",value:"nac.name"},{text:"CREADO POR",value:"user.name"},{text:"CREACI\xD3N",value:"created_at"},{text:"ESTADO",value:"status"},{text:"ACCIONES",value:"actions"}],l=u([]);let t=u(1),_=u(0);async function r(){await n.get(t.value).then(()=>{l.value=n.data.all,_.value=n.data.count_page})}const N=e=>{const{id:i,consecutive:c}=e;return{id:i,consecutive:c,sections:{general:{title:"Datos Generales",fields:{LUGAR:e.place,FECHA:e.activity_date,"HORA INICIO":e.start_time,"HORA FINAL":e.final_hour,EXPERTICIA:d.get_option_label("expertises",e.expertise_id),NAC:d.get_option_label("nacs",e.nac_id)}},description_workday:{title:"Descripci\xF3n de la Jornada",fields:{"SE CUMPLI\xD3 EL OBJETIVO":e.goals_met=="si"?"SI":"NO",EXPLICACI\u00D3N:e.explanation,PEDAG\u00D3GICO:e.pedagogical_comments,"T\xC9CNICO PRACTICO":e.technical_practical_comments,METODOLOGICO:e.methodological_comments,"OTROS Y OBSERVACIONES":e.others_observations}},multimedia:{title:"Multimedia",fields:{"DESARROLLO DEL DESARROLLO (IMAGEN)":e.place_file1,"EVIDENCIA DE LAS PERSONAS (IMAGEN)":e.place_file2}},assistants:{title:"Asistentes Agregados",fields:{ASISTENTES:e.assistants.map(a=>{const m=d.get_monitor_by_id(a.id);return m!="No encontrad@"?{NOMBRE:m.monitor_fullname,C\u00C9DULA:m.document_number}:{NOMBRE:a.name,C\u00C9DULA:"No encontrada"}})}}}}};return D(async()=>{await r(),l.value.map(e=>({...e,actions:"Acciones"}))}),(e,i)=>{const c=b("v-pagination");return p(),C(y,null,[s("div",w,[G,o(A).methodologicalInstructions.create()?(p(),C("div",P,[s("button",{class:"btn btn-primary shadow-md mr-2",onClick:I},"Crear Instrucci\xF3n Metodol\xF3gica")])):S("",!0)]),s("div",B,[s("div",U,[f(c,{modelValue:o(t),"onUpdate:modelValue":[i[0]||(i[0]=a=>L(t)?t.value=a:t=a),r],pages:o(_),"range-size":1,"active-color":"#DCEDFF"},null,8,["modelValue","pages"])]),f(V,{headers:v,items:o(l),management_permissions:o(A).methodologicalInstructions.crud_management(),item_see_fnc:N,label:"la mesa de dialogo","on-delete-fnc":O},null,8,["items","management_permissions"])])],64)}}});export{Z as default};
