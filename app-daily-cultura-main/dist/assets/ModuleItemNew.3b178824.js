import{m as I,b as S,s as b,N as $,v as N,D as G,E as U,f as M,g as R,h as t,i as n,t as f,ad as k,l as e,j as E,F as O,u as j,q as B}from"./index.c93647e1.js";import{m as q}from"./module_item.service.4559b51e.js";import{u as F}from"./index.esm.8471a966.js";import{_}from"./Input.d2784565.js";import{_ as T}from"./Radio.33857de6.js";import{_ as C}from"./Textarea.8cc31183.js";import{_ as z}from"./BaseBackButton.438a649f.js";import{_ as A}from"./Select.7b4ad9bd.js";import{r as m}from"./validations.9fff8c5b.js";import"./index.esm.c98934a4.js";const H=I("moduleItems",{state:()=>({form:{name:"",route:"",description:"",icon:"",available:"",module_id:""},form_rules:{name:{required:m},route:{required:m},description:{required:m},icon:{},available:{required:m},module_id:{required:m}},form_options:{decisions:[{value:"1",text:"Si"},{value:"0",text:"No"}]},validator:{generalData:!1}}),getters:{isGeneralData:r=>r.validator.generalData},actions:{toggleGeneralData(r){this.$patch(u=>{u.validator.generalData=r})}}}),J={class:"intro-y flex flex-col items-start gap-1 mt-8"},K={class:"text-lg font-medium mr-auto"},L={class:"intro-y box mt-5"},P=["onSubmit"],Q={id:"generalData",class:"flex flex-col lg:grid lg:grid-cols-2 xl:grid xl:grid-cols-2 gap-6 justify-evenly mb-8"},W={class:"w-full"},X={class:"w-full"},Y={class:"w-full lg:col-span-2 xl:col-span-2"},Z={class:"w-full"},ee={class:"w-full"},ae={class:"w-full"},oe={class:"flex justify-center"},te=["disabled"],fe={__name:"ModuleItemNew",props:["id"],setup(r){const u=r,g=S(),{options:V}=b(g),s=H(),d=q(),{form:a,form_rules:x,form_options:y}=b(s);j();const c=B(),i=F(x,a);$(a.value,async()=>{await i.value.$validate()?s.toggleGeneralData(!0):s.toggleGeneralData(!1)});const w=async()=>await d.getOne(c.params.id),p=N(()=>!!c.params.id);G(async()=>{if(c.params.id){await w().catch(()=>{U.not_found_by_id()});const{id:v,created_at:o,updated_at:l,...h}=d.dataOne.value;a.value={...h}}else s.$reset()});const D=async()=>{p.value?await d.update(d.dataOne.value.id,a.value):await d.create(a.value)};return(v,o)=>(M(),R(O,null,[t("div",J,[n(z),t("h2",K,f(u.id?"Editar":"Crear")+" modulo item ",1)]),t("div",L,[t("form",{onSubmit:k(D,["prevent"]),class:"px-5 sm:px-10 py-10 border-t border-slate-200/60 dark:border-darkmode-400"},[t("section",Q,[t("div",W,[n(_,{type:"text",label:"Nombre *",tooltip:"Ingrese el nombre",placeholder:"Nombre",name:"name",modelValue:e(a).name,"onUpdate:modelValue":o[0]||(o[0]=l=>e(a).name=l),validator:e(i)},null,8,["modelValue","validator"])]),t("div",X,[n(_,{type:"text",label:"Ruta *",tooltip:"Ingrese el ruta",placeholder:"Ruta",name:"route",modelValue:e(a).route,"onUpdate:modelValue":o[1]||(o[1]=l=>e(a).route=l),validator:e(i)},null,8,["modelValue","validator"])]),t("div",Y,[n(C,{label:"Descripcion *",tooltip:"Ingrese la descripcion",placeholder:"Descripcion",name:"description",modelValue:e(a).description,"onUpdate:modelValue":o[2]||(o[2]=l=>e(a).description=l),validator:e(i),rows:"3"},null,8,["modelValue","validator"])]),t("div",Z,[n(_,{type:"text",label:"Icon",tooltip:"Ingrese el icon",placeholder:"icon",name:"icon",modelValue:e(a).icon,"onUpdate:modelValue":o[3]||(o[3]=l=>e(a).icon=l),validator:e(i)},null,8,["modelValue","validator"])]),t("div",ee,[n(T,{label:"Disponible?",tooltip:"Disponible?",name:"available",modelValue:e(a).available,"onUpdate:modelValue":o[4]||(o[4]=l=>e(a).available=l),options:e(y).decisions,validator:e(i)},null,8,["modelValue","options","validator"])]),t("div",ae,[n(A,{label:"Modulo",tooltip:"Selecciona un modulo",placeholder:"Seleccione",name:"module_id",modelValue:e(a).module_id,"onUpdate:modelValue":o[5]||(o[5]=l=>e(a).module_id=l),options:e(V).modules||null,validator:e(i)},null,8,["modelValue","options","validator"])])]),t("div",oe,[E(f(e(s).isGeneralData)+" - "+f(e(p))+" ",1),t("button",{disabled:!e(s).isGeneralData&&!e(p)&&e(s).loading,type:"submit",class:"btn btn-primary w-24 ml-2"}," Ingresar ",8,te)])],40,P)])],64))}};export{fe as default};
