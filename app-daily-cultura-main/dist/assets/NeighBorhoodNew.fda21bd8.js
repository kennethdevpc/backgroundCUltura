import{m as x,s as D,aq as w,N as V,H as $,v as N,D as S,E as k,f as u,g as f,h as e,i as _,l as a,j as B,t as E,ad as G,F as I,q as j,Q as q}from"./index.c93647e1.js";import{n as M}from"./neighborhood.service.603a994e.js";import{u as O}from"./index.esm.8471a966.js";import{r as v}from"./validations.9fff8c5b.js";import{_ as R}from"./Input.d2784565.js";import{_ as A}from"./BaseBackButton.438a649f.js";import{_ as C}from"./Select.7b4ad9bd.js";import"./index.esm.c98934a4.js";const F=x("neighborhoods",{state:()=>({form:{name:"",nac_id:""},form_rules:{name:{required:v},nac_id:{required:v}},validator:{generalData:!0}}),getters:{isValid:l=>!!l.validator.generalData,transpiledData(){return{...this.form}}},actions:{toggleGeneralData(l){this.$patch(d=>{d.validator.generalData=l})}}}),T={class:"intro-y flex flex-col items-start gap-1 mt-8"},U={key:0,class:"text-lg font-medium mr-auto"},H={key:1,class:"text-lg font-medium mr-auto"},Q={class:"intro-y box mt-5"},z=["onSubmit"],J={id:"GeneralData",class:"flex flex-col lg:grid lg:grid-cols-1 xl:grid xl:grid-cols-1 gap-6 justify-evenly mb-8"},K={class:"w-full"},L={class:"w-full"},P=e("div",{class:"flex justify-center"},[e("button",{type:"submit",class:"btn btn-primary w-24 ml-2"}," Ingresar ")],-1),oe={__name:"NeighBorhoodNew",setup(l){const d=j(),t=F(),{form:s,form_rules:h}=D(t),r=M(),p=w(),i=O(h,s,{$autoDirty:!0});V(s.value,async()=>{await i.value.$validate()?t.toggleGeneralData(!0):t.toggleGeneralData(!1)});const g=$({nacs:[]}),b=async()=>await r.getOne(d.params.id),c=N(()=>!!d.params.id);S(async()=>{if(await p.getNacs().then(()=>{g.nacs=p.nacs.all}),c.value){await b().catch(()=>{k.not_found_by_id()});const{id:m,created_at:o,...n}=r.data.one;s.value={...n}}else t.$reset()});const y=async()=>{i.value.$validate()?c.value?await r.update(r.data.one.id,t.transpiledData):await r.create(t.transpiledData).then(async o=>{o.data.success&&(t.$reset(),i.value.$reset())}):q.validation()};return(m,o)=>(u(),f(I,null,[e("div",T,[_(A),a(c)?(u(),f("h2",U,[B(" Edici\xF3n de barrio: "),e("b",null,E(a(r).data.one.id),1)])):(u(),f("h2",H," Ingresar barrio "))]),e("div",Q,[e("form",{onSubmit:G(y,["prevent"]),class:"p-5 border-t border-slate-200/60 dark:border-darkmode-400"},[e("section",J,[e("div",K,[_(C,{label:"NAC *",tooltip:"Ingrese el NAC",placeholder:"Seleccione",name:"nac_id",modelValue:a(s).nac_id,"onUpdate:modelValue":o[0]||(o[0]=n=>a(s).nac_id=n),options:g.nacs,validator:a(i)},null,8,["modelValue","options","validator"])]),e("div",L,[_(R,{type:"text",label:"NOMBRE *",tooltip:"Ingrese el nombre del barrio",placeholder:"Barrio...",name:"name",modelValue:a(s).name,"onUpdate:modelValue":o[1]||(o[1]=n=>a(s).name=n),validator:a(i)},null,8,["modelValue","validator"])])]),P],40,z)])],64))}};export{oe as default};
