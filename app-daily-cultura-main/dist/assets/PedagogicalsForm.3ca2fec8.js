import{m as h,s as y,b as N,v as $,D as I,E as x,f as E,g as P,i as s,w as T,j as D,t as L,l as e,y as B,k as F,h as l,ad as q,B as M,F as k,q as H,a as J,an as z}from"./index.c93647e1.js";import{s as X}from"./scroll.6a87917e.js";import{u as Y}from"./index.esm.8471a966.js";import{c as G}from"./generals.service.ee73141b.js";import{P as K}from"./pedagogical.service.1714510b.js";import{r as n,c as Q}from"./validations.9fff8c5b.js";import{_ as S}from"./Input.d2784565.js";import{_ as c}from"./Select.7b4ad9bd.js";import{_ as m}from"./Textarea.8cc31183.js";import{_ as W}from"./Management.8f9978fe.js";import{p as O}from"./permissions.c73d0fc1.js";import{_ as Z}from"./FormHeader.f0e8692c.js";import"./index.37cca9d1.js";import"./index.esm.c98934a4.js";import"./useSlug.fdbf14df.js";import"./StateHeader.5dfd959d.js";import"./get_status.6c591513.js";import"./BaseBackButton.438a649f.js";const ee=h("pedagogicals",{state:()=>({form:{consecutive:"",activity_name:"",activity_date:"",expertise_id:"",nac_id:"",cultural_right_id:"",lineament_id:"",orientation_id:"",experiential_objective:"",manifestation:"",process:"",product:"",resources:""},form_rules:{activity_name:{required:n,alphaOrAlphanumeric:Q},activity_date:{required:n},expertise_id:{required:n},nac_id:{required:n},cultural_right_id:{required:n},lineament_id:{required:n},orientation_id:{required:n},experiential_objective:{required:n},manifestation:{required:n},process:{required:n},product:{required:n},resources:{required:n}},form_options:{seleccion:[{value:"si",text:"Si"},{value:"no",text:"No"}]},update_instance:{consecutive:"",status:"",reject_message:""}}),getters:{},actions:{}}),te={class:"intro-y box mt-5"},ae=["disabled"],oe=["onSubmit"],le={class:"flex flex-col lg:grid lg:grid-cols-2 xl:grid xl:grid-cols-3 gap-6 justify-evenly mb-8"},ie={class:"intro-y flex flex-col gap-6 mb-8"},se=l("h2",{class:"font-bold text-lg mr-auto intro-y"},"Componente metodol\xF3gico",-1),ne={class:"flex flex-col lg:grid lg:grid-cols-2 xl:grid-cols-3 gap-6 justify-evenly"},re={class:"lg:col-span-2 xl:col-span-3"},de={class:"intro-y flex flex-col gap-6 mb-8"},ue=l("h2",{class:"font-bold text-lg mr-auto intro-y"}," Etapas y desarrollo de la Macroestructura cultural ",-1),ce={class:"flex flex-col gap-6 justify-evenly"},me={class:"flex justify-center"},pe=["disabled"],Te={__name:"PedagogicalsForm",setup(ve){const r=ee(),{form:a,form_rules:A}=y(r),R=N(),{options:u}=y(R),i=Y(A,a,{$autoDirty:!0,$lazy:!0}),d=K(),f=G(),V=H(),p=$(()=>!!V.params.id),_=async()=>await f.getConsecutive("pedagogicals","FP").then(()=>{a.value.consecutive=f.data.value}),C=async()=>await d.getOne(V.params.id);I(async()=>{p.value?(r.$reset(),await C().then(()=>{const{created_at:g,id:t,monitor:o,nac:_e,orientation:ge,status:w,reject_message:U,user_id:fe,...b}=d.data.one;r.$patch(v=>{Object.assign(v.form,b),v.update_instance.consecutive=b.consecutive,v.update_instance.status=w,v.update_instance.reject_message=U})}).catch(()=>{x.not_found_by_id()})):(r.$reset(),i.value.$reset(),await _())});const j=async()=>{await i.value.$validate()?p.value?await d.update(d.data.one.id,a.value):await _().finally(()=>{d.create({...a.value,user_id:J().get_user.id}).then(async t=>{t.status==201&&(r.$reset(),i.value.$reset(),X(),await _())})}):z.fire("Validaci\xF3n","Por favor valide los campos solicitados.","error")};return(g,t)=>(E(),P(k,null,[s(Z,{state:{consecutive:e(a).consecutive,status:e(r).update_instance.status,reject_message:e(r).update_instance.reject_message}},{default:T(()=>[D(L(e(p)?`Edici\xF3n de Ficha Pedag\xF3gica #${e(d).data.one.id}`:"Ficha Pedag\xF3gica"),1)]),_:1},8,["state"]),e(p)&&e(O).pedagogicals.management()?(E(),B(W,{key:0,onSend:t[0]||(t[0]=o=>e(x).methods.send_management("pedagogicals",e(d).data.one.id,o)),class:"mt-5"})):F("",!0),l("div",te,[l("fieldset",{disabled:e(O).pedagogicals.no_edit()},[l("form",{onSubmit:q(j,["prevent"]),class:"p-5 border-t border-slate-200/60"},[l("div",le,[l("div",null,[s(S,{type:"text",label:"NOMBRE DE ACTIVIDAD *",tooltip:"",placeholder:"Nombre de actividad...",name:"activity_name",modelValue:e(a).activity_name,"onUpdate:modelValue":t[1]||(t[1]=o=>e(a).activity_name=o),validator:e(i)},null,8,["modelValue","validator"])]),l("div",null,[s(S,{type:"date",label:"FECHA *",tooltip:"",name:"activity_date",modelValue:e(a).activity_date,"onUpdate:modelValue":t[2]||(t[2]=o=>e(a).activity_date=o),validator:e(i)},null,8,["modelValue","validator"])]),l("div",null,[s(c,{label:"EXPERTICIA *",tooltip:"",name:"expertise_id",modelValue:e(a).expertise_id,"onUpdate:modelValue":t[3]||(t[3]=o=>e(a).expertise_id=o),options:e(u).expertises||null,validator:e(i)},null,8,["modelValue","options","validator"])]),l("div",null,[s(c,{label:"NAC *","onVOn:change":t[4]||(t[4]=o=>g.nac(o)),tooltip:"",name:"nac_id",modelValue:e(a).nac_id,"onUpdate:modelValue":t[5]||(t[5]=o=>e(a).nac_id=o),options:e(u).nacs||null,validator:e(i)},null,8,["modelValue","options","validator"])])]),l("div",ie,[se,l("div",ne,[l("div",null,[s(c,{label:"DERECHOS CULTURALES *",tooltip:"",name:"cultural_right_id",modelValue:e(a).cultural_right_id,"onUpdate:modelValue":t[6]||(t[6]=o=>e(a).cultural_right_id=o),options:e(u).cultural_rights||null,validator:e(i)},null,8,["modelValue","options","validator"])]),l("div",null,[s(c,{label:"LINEAMIENTOS *",tooltip:"",name:"lineament_id",modelValue:e(a).lineament_id,"onUpdate:modelValue":t[7]||(t[7]=o=>e(a).lineament_id=o),options:e(u).lineaments||null,validator:e(i)},null,8,["modelValue","options","validator"])]),l("div",null,[s(c,{label:"ORIENTACIONES *",tooltip:"",name:"orientation_id",modelValue:e(a).orientation_id,"onUpdate:modelValue":t[8]||(t[8]=o=>e(a).orientation_id=o),options:e(u).orientations||null,validator:e(i)},null,8,["modelValue","options","validator"])]),l("div",re,[s(m,{label:"OBJETIVO VIVENCIAL *",tooltip:"",placeholder:"Objetivo vivencial...",name:"experiential_objective",modelValue:e(a).experiential_objective,"onUpdate:modelValue":t[9]||(t[9]=o=>e(a).experiential_objective=o),validator:e(i),rows:"3",required:""},null,8,["modelValue","validator"])])])]),l("div",de,[ue,l("div",ce,[l("div",null,[s(m,{label:"MANIFESTACI\xD3N CULTURAL A TRABAJAR *",tooltip:"",placeholder:"Manifestaci\xF3n cultural a trabajar...",name:"manifestation",modelValue:e(a).manifestation,"onUpdate:modelValue":t[10]||(t[10]=o=>e(a).manifestation=o),validator:e(i),rows:"3",required:""},null,8,["modelValue","validator"])]),l("div",null,[s(m,{label:"PROCESO *",tooltip:"",placeholder:"Proceso...",name:"process",modelValue:e(a).process,"onUpdate:modelValue":t[11]||(t[11]=o=>e(a).process=o),validator:e(i),rows:"3",required:""},null,8,["modelValue","validator"])]),l("div",null,[s(m,{label:"PRODUCTO *",tooltip:"",placeholder:"Producto...",name:"product",modelValue:e(a).product,"onUpdate:modelValue":t[12]||(t[12]=o=>e(a).product=o),validator:e(i),rows:"3",required:""},null,8,["modelValue","validator"])]),l("div",null,[s(m,{label:"RECURSOS NECESARIOS PARA EL DESARROLLO DEL PROYECTO *",tooltip:"",placeholder:"Recursos necesarios...",name:"resources",modelValue:e(a).resources,"onUpdate:modelValue":t[13]||(t[13]=o=>e(a).resources=o),validator:e(i),rows:"3",required:""},null,8,["modelValue","validator"])])])]),l("div",me,[l("button",{disabled:e(M),type:"submit",class:"btn btn-primary w-24 mr-1 mb-2"},"Ingresar",8,pe)])],40,oe)],8,ae)])],64))}};export{Te as default};
