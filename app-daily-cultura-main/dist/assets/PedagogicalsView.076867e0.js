import{d as N,v as y,r,D as P,f as d,g as _,h as n,l as s,k as T,i as g,M as U,F as V,u as b,q as F,E as C,e as L}from"./index.c93647e1.js";import{p as v}from"./permissions.c73d0fc1.js";import{P as S}from"./pedagogical.service.1714510b.js";import{_ as w}from"./BaseCrudPDF.669a02c7.js";import"./index.37cca9d1.js";import"./DatasheetFormat.bb093e19.js";import"./description.c57d405a.js";import"./user.service.5d6ec521.js";import"./useSlug.fdbf14df.js";import"./Input.d2784565.js";import"./Select.7b4ad9bd.js";import"./get_status.6c591513.js";const k={class:"intro-y flex flex-col sm:flex-row items-center mt-5"},M=n("h2",{class:"text-lg font-medium mr-auto"},"Ficha Pedag\xF3gica",-1),B={key:0,class:"w-full sm:w-auto flex mt-4 sm:mt-0"},H={class:"intro-y box mt-5 p-5"},j={class:"flex items-center justify-center p-2 text-base"},ae=N({__name:"PedagogicalsView",setup(X){const i=S(),f=b(),x=F(),E=y(()=>String(x.name).split(".")[0]),A=()=>{f.push({name:`${E.value}.create`})};async function I(e){await i.destroy(e),o()}const D=[{text:"CONSECUTIVO",value:"consecutive"},{text:"ACTIVIDAD",value:"activity_name"},{text:"FECHA",value:"activity_date",width:120},{text:"EXPERTICIA",value:"expertise.name"},{text:"NAC",value:"nac.name"},{text:"DERECHO CULTURAL",value:"cultural_right.name"},{text:"LINEAMIENTO",value:"lineament_id"},{text:"CREADO POR",value:"user.name"},{text:"C\xC9DULA",value:"profile.document_number"},{text:"CREACI\xD3N",value:"created_at"},{text:"ESTADO",value:"status"},{text:"ACCIONES",value:"actions"}],l=r([]);let t=r(1),p=r(0);const c=r({});async function o(){const e=Object.keys(c.value).length?new URLSearchParams(c.value):null;await i.get(t.value,e),l.value=i.data.all,p.value=i.data.count_page}function O(e){t.value=1,c.value=e,o()}function R(){o()}const h=e=>{const{id:a,consecutive:u}=e;return{id:a,consecutive:u,sections:{general:{title:"Datos Generales",fields:{"CREADO POR":e.user.name,C\u00C9DULA:e.profile.document_number,ACTIVIDAD:e.activity_name,FECHA:e.activity_date,EXPERTICIA:e.expertise.name,NAC:e.nac.name}},methodological_component:{title:"Componente metodol\xF3gico",fields:{"DERECHO CULTURAL":e.cultural_right.name,LINEAMIENTO:C.get_option_label("lineaments",e.lineament_id),ORIENTACI\u00D3N:C.get_option_label("orientations",e.orientation_id),"OBJETIVO VIVENCIAL":e.experiential_objective}},macrostructure_cultural:{title:"Etapas y Desarrollo de la Macroestructura Cultural",fields:{"MANIFESTACI\xD3N CULTURAL":e.manifestation,PROCESO:e.process,PRODUCTO:e.product,"RECURSOS NECESARIOS":e.resources}}}}};return P(async()=>{await o(),l.value.map(e=>({...e,actions:"Acciones"}))}),(e,a)=>{const u=L("v-pagination");return d(),_(V,null,[n("div",k,[M,s(v).pedagogicals.create()?(d(),_("div",B,[n("button",{class:"btn btn-primary shadow-md mr-2",onClick:A}," Crear ficha pedag\xF3gica ")])):T("",!0)]),n("div",H,[n("div",j,[g(u,{modelValue:s(t),"onUpdate:modelValue":[a[0]||(a[0]=m=>U(t)?t.value=m:t=m),R],pages:s(p),"range-size":1,"active-color":"#DCEDFF"},null,8,["modelValue","pages"])]),g(w,{headers:D,items:s(l),item_see_fnc:h,management_permissions:s(v).pedagogicals.crud_management(),label:"la ficha pedag\xF3gica","on-delete-fnc":I,onChange_status:a[1]||(a[1]=m=>o()),onChange_filter:O,server_options:{page:1,rowsPerPage:15}},null,8,["items","management_permissions"])])],64)}}});export{ae as default};
