import{d as L,E as p,v as E,r as i,D as P,f as I,g as C,h as l,i as A,w as h,j as y,k as V,l as r,M as b,F,u as U,q as w,e as M}from"./index.c93647e1.js";import{_ as B}from"./BaseCrud.3eb21af2.js";import{p as O}from"./permissions.c73d0fc1.js";import{b as G}from"./binnacle_territories.service.3e4eec66.js";import{_ as H}from"./ToCreate.df149aaf.js";import"./DatasheetFormat.bb093e19.js";import"./description.c57d405a.js";import"./user.service.5d6ec521.js";import"./useSlug.fdbf14df.js";import"./Input.d2784565.js";import"./Select.7b4ad9bd.js";import"./get_status.6c591513.js";const k={class:"intro-y flex flex-col sm:flex-row items-center mt-8"},j=l("h2",{class:"text-lg font-medium mr-auto"}," Reporte visita a territorio de coordinadores ",-1),J={key:0,class:"w-full sm:w-auto flex mt-4 sm:mt-0"},$={class:"flex items-center justify-center p-2 text-base"},q={class:"intro-y box mt-5 p-5"},ie=L({__name:"ReportTerritorialCoordinador",setup(z){const n=G(),{is_role:c}=p.computed;U();const v=w();E(()=>String(v.name).split(".")[0]);async function R(e){await n.destroy(e),o()}const f=[{text:"CONSECUTIVO",value:"consecutive"},{text:"CREADO POR",value:"created_by.name"},{text:"FECHA",value:"activity_date",width:120},{text:"HORA INICIO",value:"start_time"},{text:"HORA FINAL",value:"final_hour"},{text:"NAC",value:"nac.name"},{text:"CREACI\xD3N",value:"created_at"},{text:"USUARIO AUDITADO",value:"user_id"},{text:"ROL AUDITADO",value:"roles"},{text:"ESTADO",value:"status"},{text:"ACCIONES",value:"actions"}],u=i([]),D=e=>{const{id:a,consecutive:d,roles:s}=e,g=E(()=>s[0].name);return{id:a,consecutive:d,sections:{general:{title:"Datos Generales",fields:{NAC:e.nac.name,ROL:g.value,USUARIO:p.get_option_label("users_table",e.user.id),FECHA:e.activity_date,"HORA INICIO":e.start_time,"HORA FINAL":e.final_hour,LUGAR:e.place}},development:{title:"DESARROLLO DE LA VISITA",fields:{"OBJETIVOS ESTRAT\xC9GICOS DEL \xC1REA":e.strategic_objectives_area,"PROP\xD3SITO DE LA VISITA":e.purpose_visit}},diagnostic:{title:"DIAGN\xD3STICO INICIAL",fields:{"TEM\xC1TICAS ABORDADAS":e.topics_covered,"PERCEPCI\xD3N DE LOS PARTICIPANTES FRENTE A LAS ACTIVIDADES DESARROLLADAS POR EL \xC1REA":e.participants_perception,"DIFICULTADES O PROBLEM\xC1TICAS IDENTIFICADAS":e.problems_identified,"RECOMENDACIONES Y ACCIONES DE MEJORA PROPUESTAS POR LOS PARTICIPANTES ":e.recommendations_actions,"PERCEPCIONES/COMENTARIOS/AN\xC1LISIS FRENTE AL AVANCE DEL PROCESO":e.comments_analysis}},multimedia:{title:"Multimedia",fields:{"IMAGEN DESARROLLO":e.development_activity_image,"IMAGEN EVIDENCIA DE PARTICIPACI\xD3N":e.evidence_participation_image}}}}};let t=i(1),_=i(0);const m=i({});async function o(){const e=Object.keys(m.value).length?new URLSearchParams(m.value):null;await n.get(t.value,e),u.value=n.data.all,_.value=n.data.count_page}function S(e){t.value=1,m.value=e,o()}function x(){o()}P(async()=>{await o(),u.value.map(e=>({...e,actions:"Acciones"}))});const N=c("subdireccion")?O.subdireccion.crud_management():O.direccion.crud_management_coordinador(),T=()=>c("super.root")||c("root");return(e,a)=>{const d=M("v-pagination");return I(),C(F,null,[l("div",k,[j,T?(I(),C("div",J,[A(H,{to:{name:"coordinadores.create"}},{default:h(()=>[y(" Crear Visita a Territorio ")]),_:1},8,["to"])])):V("",!0)]),l("div",$,[A(d,{modelValue:r(t),"onUpdate:modelValue":[a[0]||(a[0]=s=>b(t)?t.value=s:t=s),x],pages:r(_),"range-size":1,"active-color":"#DCEDFF"},null,8,["modelValue","pages"])]),l("div",q,[A(B,{headers:f,items:r(u),item_see_fnc:D,management_permissions:r(N),label:"la bit\xE1cora","on-delete-fnc":R,onChange_status:a[1]||(a[1]=s=>o()),onChange_filter:S,server_options:{page:1,rowsPerPage:15}},null,8,["items","management_permissions"])])],64)}}});export{ie as default};
