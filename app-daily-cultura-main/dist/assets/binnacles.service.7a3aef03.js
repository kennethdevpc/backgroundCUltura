import{H as b,r as h,u as w,P as o,K as d,Q as i,E as O}from"./index.c93647e1.js";const l="binnacles",u="api/v1";function F(){const f=b({all:[],one:{},count_page:0}),v=w(),c=h("");return{data:f,errors:c,get:async(n,t=null)=>{var e;try{o(!0);let a=Boolean(t)?`?page=${n}&${t}`:`?page=${n}`,p=await d.get(`/${u}/${l}${a}`).finally(()=>{o(!1)});p.status===200&&(f.all=p.data.items,f.count_page=p.data.count_page)}catch(a){i.custom_validation((e=a.response.data.error)!=null?e:a.response.data.message)}},getOne:async n=>{var t;try{o(!0);let e=await d.get(`/${u}/${l}/${n}`).finally(()=>{o(!1)});return e.status===200&&(f.one=e.data.items),e}catch(e){e.response.status===404?O.not_found_by_id():i.custom_validation((t=e.response.data.error)!=null?t:e.response.data.message)}},update:async(n,t,e)=>{var s;c.value="";const a=new FormData,{development_activity_image:p,evidence_participation_image:_,aforo_file:y,beneficiary_id:g,...m}=t;for(const[r,$]of Object.entries(m))a.append(r,$);a.append("updated_from",e),a.append("beneficiary_id",JSON.stringify(g)),a.append("development_activity_image",p),a.append("evidence_participation_image",_),a.append("aforo_file",y);try{o(!0),(await d.post(`/${u}/${l}/${n}`,a,{"Content-Type":"multipart/form-data"}).finally(()=>{o(!1)})).status===200&&(i.update(),e=="gestor"?v.push({name:"binnacleManagers.index"}):e=="monitor"&&v.push({name:"binnacles.index"}))}catch(r){c.value=r.response.data.errors,i.custom_validation((s=r.response.data.error)!=null?s:r.response.data.message)}},create:async(n,t)=>{var m;c.value="";const e=new FormData,{development_activity_image:a,evidence_participation_image:p,aforo_file:_,beneficiary_id:y,...g}=n;for(const[s,r]of Object.entries(g))e.append(s,r);e.append("created_from",t),e.append("beneficiary_id",JSON.stringify(y)),e.append("development_activity_image",a),e.append("evidence_participation_image",p),e.append("aforo_file",_);try{o(!0);const s=await d.post(`/${u}/${l}`,e,{"Content-Type":"multipart/form-data"}).finally(()=>{o(!1)});return s.status===200&&s.data.success&&i.create(),s}catch(s){c.value=s.response.data.errors,i.custom_validation((m=s.response.data.error)!=null?m:s.response.data.message)}},destroy:async n=>{var t;try{o(!0),(await d.delete(`/${u}/${l}/${n}`).finally(()=>{o(!1)})).status==200&&i.destroy("Bit\xE1cora",n)}catch(e){c.value=e.response.data.errors,i.custom_validation((t=e.response.data.error)!=null?t:e.response.data.message)}}}}export{F as B};
