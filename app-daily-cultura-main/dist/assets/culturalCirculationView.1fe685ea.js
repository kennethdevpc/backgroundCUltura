import{d as h,au as b,v as L,r,D as P,f as p,g as E,h as i,l as n,k as y,i as C,M as V,F as w,u as F,q as U,E as o,e as B}from"./index.c93647e1.js";import{_ as M}from"./BaseCrud.3eb21af2.js";import{u as A}from"./cultural_circulations.service.1a70ea4e.js";import{p as v}from"./permissions.c73d0fc1.js";import"./DatasheetFormat.bb093e19.js";import"./description.c57d405a.js";import"./user.service.5d6ec521.js";import"./useSlug.fdbf14df.js";import"./Input.d2784565.js";import"./Select.7b4ad9bd.js";import"./get_status.6c591513.js";const k={class:"intro-y flex flex-col sm:flex-row items-center mt-8"},H=i("h2",{class:"text-lg font-medium mr-auto"},"Bit\xE1cora circulaci\xF3n cultural",-1),j={key:0,class:"w-full sm:w-auto flex mt-4 sm:mt-0"},G={class:"intro-y box p-5 mt-5"},J={class:"flex items-center justify-center p-2 text-base"},ne=h({__name:"culturalCirculationView",setup($){const f=F(),x=U();b();const{get:q,destroy:I}=A(),l=A(),g=L(()=>String(x.name).split(".")[0]),O=()=>{f.push({name:`${g.value}.create`})};async function R(e){await I(e),s()}const D=[{text:"CONSECUTIVO",value:"consecutive"},{text:"FECHA",value:"date",width:120},{text:"CIRCULACI\xD3N",value:"datasheet",width:150},{text:"DERECHO CULTURAL",value:"cultural_right_id"},{text:"LINEAMIENTOS",value:"lineament_id"},{text:"ORIENTACIONES",value:"orientation_id"},{text:"CREADO POR",value:"created_by.name"},{text:"FECHA DE CREACI\xD3N",value:"created_at"},{text:"ESTADO",value:"status"},{text:"ACCIONES",value:"actions"}],c=r([]);let a=r(1),d=r(0);const u=r({});async function s(){const e=Object.keys(u.value).length?new URLSearchParams(u.value):null;await l.get(a.value,e),c.value=l.data.all,d.value=l.data.count_page}function N(e){a.value=1,u.value=e,s()}function T(){s()}P(async()=>{var e;await s(),c.value=(e=l.data.all)==null?void 0:e.map(t=>({...t,actions:"Actions"}))});const S=e=>{const{id:t,consecutive:_}=e;return{id:t,consecutive:_,sections:{general:{title:"Datos Generales",fields:{ESTADO:e.status,CONSECUTIVE:e.consecutive,"NOMBRE EVENTO":e.event_name,NIVEL:o.get_option_label("filter_level",e.filter_level),"DERECHO CULTURAL":o.get_option_label("cultural_rights",e.cultural_right_id),LINEAMIENTOS:o.get_option_label("lineaments",e.lineament_id),VALOR:o.get_option_label("values",e.values),ORIENTACIONES:o.get_option_label("orientations",e.orientation_id),DESCRIPCI\u00D3N:e.description,"CARACTERISTICAS P\xDABLICO ASISTENTE":e.public_characteristics,"EXPERTICIA ART\xCDSTICA A TRABAJAR":e.artistic_expertise,"OBSERVACIONES DE TU PARTICIPACI\xD3N":e.participation_observations,"CREADO POR":e.created_by.name,"FECHA DE CREACI\xD3N":e.created_at}},multimedia:{title:"Multimedia",fields:{"IMAGEN (DESARROLLO DE LA JORNADA DE PACTO)":e.development_activity_image,"EVIDENCIA DE PARTICIPACI\xD3N":e.evidence_participation_image,"FOTO DEL DESARROLLO":e.aforo_pdf}}}}};return(e,t)=>{const _=B("v-pagination");return p(),E(w,null,[i("div",k,[H,n(v).cultural_circulation.create()?(p(),E("div",j,[i("button",{class:"btn btn-primary shadow-md mr-2",onClick:O}," Crear una bit\xE1cora circulaci\xF3n cultural ")])):y("",!0)]),i("div",G,[i("div",J,[C(_,{modelValue:n(a),"onUpdate:modelValue":[t[0]||(t[0]=m=>V(a)?a.value=m:a=m),T],pages:n(d),"range-size":1,"active-color":"#DCEDFF"},null,8,["modelValue","pages"])]),C(M,{item_see_fnc:S,headers:D,items:n(c),management_permissions:n(v).cultural_circulation.crud_management(),label:"circulaci\xF3n cultural","on-delete-fnc":R,onChange_status:t[1]||(t[1]=m=>s()),onChange_filter:N,server_options:{page:1,rowsPerPage:15}},null,8,["items","management_permissions"])])],64)}}});export{ne as default};
