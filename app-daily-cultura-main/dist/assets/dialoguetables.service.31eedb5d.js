import{H as $,r as v,u as w,P as o,K as c,Q as l,E as b}from"./index.c93647e1.js";const d="dialoguetables",u="api/v1";function C(){const f=$({all:[],one:{},no_paginate:[],count_page:0}),y=w(),p=v("");return{data:f,errors:p,get:async(s,a=null)=>{var e;try{o(!0);let r=Boolean(a)?`?page=${s}&${a}`:`?page=${s}`,i=await c.get(`/${u}/${d}${r}`).finally(()=>{o(!1)});i.status===200&&(f.all=i.data.items,f.count_page=i.data.count_page)}catch(r){l.custom_validation((e=r.response.data.error)!=null?e:r.response.data.message)}},getOne:async s=>{var a;try{o(!0);let e=await c.get(`/${u}/${d}/${s}`).finally(()=>{o(!1)});return e.status===200&&(f.one=e.data.items),e}catch(e){e.response.status===404?b.not_found_by_id():l.custom_validation((a=e.response.data.error)!=null?a:e.response.data.message)}},update:async(s,a)=>{var t;p.value="";const e=new FormData,{place_image1:r,place_image2:i,asistents:g,...m}=a;for(const[n,_]of Object.entries(m))e.append(n,_);e.append("asistents",JSON.stringify(g)),r.file&&e.append("place_image1",r.file),i.file&&e.append("place_image2",i.file);try{o(!0);const n=await c.post(`/${u}/${d}/${s}`,e,{"Content-Type":"multipart/form-data"}).finally(()=>{o(!1)});return n.status==200&&n.data.success&&(l.update(),y.push({name:"dialoguetables.index",params:{}})),n}catch(n){p.value=n.response.data.errors,l.custom_validation((t=n.response.data.error)!=null?t:n.response.data.message)}},create:async s=>{var m;p.value="";const a=new FormData,{place_image1:e,place_image2:r,asistents:i,...g}=s;for(const[t,n]of Object.entries(g))a.append(t,n);a.append("asistents",JSON.stringify(i)),a.append("place_image1",e.file),a.append("place_image2",r.file);try{o(!0);const t=await c.post(`/${u}/${d}`,a,{"Content-Type":"multipart/form-data"}).finally(()=>{o(!1)});return t.status==200&&t.data.success&&l.create(),t}catch(t){p.value=t.response.data.errors,l.custom_validation((m=t.response.data.error)!=null?m:t.response.data.message)}},destroy:async s=>{var a;try{o(!0),(await c.delete(`/${u}/${d}/${s}`).finally(()=>{o(!1)})).status===200&&l.destroy("Mesa de Dialogo",s)}catch(e){p.value=e.response.data.errors,l.custom_validation((a=e.response.data.error)!=null?a:e.response.data.message)}}}}export{C as d};
