import{r as d,H as $,u as m,P as s,K as c,Q as u}from"./index.c93647e1.js";const l="api/v1";function P(){const g=d([]),f=d([]),p=$({all:[],one:{},no_paginate:[],count_page:0}),y=m(),r=d("");return{dataPaginate:p,data:g,dataOne:f,errors:r,get:async(t,n,o=null)=>{try{s(!0);let e=Boolean(o)?`?page=${t}&${o}`:`?page=${t}`,a=await c.get(`/${l}/${n}${e}`).finally(()=>{s(!1)});a.status===200&&(p.all=a.data.items,p.count_page=a.data.count_page)}catch(e){console.log(e)}},getOne:async(t,n)=>{var o;try{s(!0);let e=await c.get(`/${l}/${t}/${n}`).finally(()=>{s(!1)});return e.status===200&&(f.value=e.data.items),e}catch(e){s(!1),e.response.status===404?mixins.not_found_by_id():u.custom_validation((o=e.response.data.error)!=null?o:e.response.data.message)}},update:async(t,n,o,e)=>{var a;r.value="";try{s(!0),(await c.put(`/${l}/${t}/${n}`,o).finally(()=>{s(!1)})).status===200&&y.push({name:e+".index",params:{}})}catch(i){u.custom_validation((a=i.response.data.error)!=null?a:i.response.data.message),r.value=i.response.data.errors}},create:async(t,n,o)=>{var e;r.value="";try{s(!0),(await c.post(`/${l}/${t}`,n).finally(()=>{s(!1)})).status===201&&y.push({name:o+".index"})}catch(a){u.custom_validation((e=a.response.data.error)!=null?e:a.response.data.message),r.value=a.response.data.errors}},destroy:async(t,n,o)=>{var e;try{s(!0),(await c.delete(`/${l}/${t}/${n}`).finally(()=>{s(!1)})).status===200&&location.reload()}catch(a){u.custom_validation((e=a.response.data.error)!=null?e:a.response.data.message),r.value=a.response.data.errors}}}}export{P as d};
