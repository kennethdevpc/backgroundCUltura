import{d as C,v as x,r as s,D as h,f as D,g as O,h as y,i as m,l as u,M as I,u as E,q as A,e as M}from"./index.c93647e1.js";import{_ as R}from"./BaseCrud.3eb21af2.js";import{c as w}from"./generals.service.ee73141b.js";import"./DatasheetFormat.bb093e19.js";import"./description.c57d405a.js";import"./user.service.5d6ec521.js";import"./useSlug.fdbf14df.js";import"./Input.d2784565.js";import"./Select.7b4ad9bd.js";import"./get_status.6c591513.js";const F={class:"intro-y box p-5 mt-5"},N={class:"flex items-center justify-center p-2 text-base"},H=C({__name:"index",setup(P){E();const p=A(),o=w();x(()=>String(p.name).split(".")[0]);const _=e=>{const{id:a,consecutive:l}=e;return{id:a,consecutive:l,sections:{original:{title:"Informaci\xF3n original",fields:{"Data original":e.data_original}},change:{title:"Informaci\xF3n actualizada",fields:{"Data change":e.data_change}}}}};async function v(e){await o.destroy(e),n()}const f=[{text:"#",value:"id"},{text:"USUARIO",value:"user.name"},{text:"MODELO",value:"data_model_type"},{text:"TIPO ACCION",value:"action"},{text:"ID MODELO",value:"data_model_id"},{text:"FECHA CREACION",value:"created_at_date"},{text:"ACCIONES",value:"actions"}],i=s([]);let t=s(1),d=s(0);const r=s({});async function n(){const e=Object.keys(r.value).length?new URLSearchParams(r.value):null;await o.getChangeDataModels(t.value,e),i.value=o.dataControl.all,d.value=o.dataControl.count_page}function g(e){t.value=1,r.value=e,n()}return h(async()=>{await n(),i.value.map(e=>({...e,actions:"Acciones"}))}),(e,a)=>{const l=M("v-pagination");return D(),O("div",F,[y("div",N,[m(l,{modelValue:u(t),"onUpdate:modelValue":[a[0]||(a[0]=c=>I(t)?t.value=c:t=c),n],pages:u(d),"range-size":1,"active-color":"#DCEDFF"},null,8,["modelValue","pages"])]),m(R,{headers:f,items:u(i),label:"Usuarios","on-delete-fnc":v,hiddenButton:!0,server_options:{page:1,rowsPerPage:15},item_see_fnc:_,onChange_status:a[1]||(a[1]=c=>n()),onChange_filter:g},null,8,["items"])])}}});export{H as default};
