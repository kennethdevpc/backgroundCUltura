import{d as N,v as R,r as i,D as w,f as d,g as f,h as o,l as n,k as b,i as _,M as F,F as I,u as M,q as P,e as S}from"./index.c93647e1.js";import{_ as V}from"./BaseCrud.3eb21af2.js";import{p as v}from"./permissions.c73d0fc1.js";import{m as k}from"./monthly_monitoring_reports.service.36690c67.js";import"./DatasheetFormat.bb093e19.js";import"./description.c57d405a.js";import"./user.service.5d6ec521.js";import"./useSlug.fdbf14df.js";import"./Input.d2784565.js";import"./Select.7b4ad9bd.js";import"./get_status.6c591513.js";const U={class:"intro-y flex flex-col sm:flex-row items-center mt-8"},T=o("h2",{class:"text-lg font-medium mr-auto"},"Informe mensual de supervisi\xF3n",-1),B={key:0,class:"w-full sm:w-auto flex mt-4 sm:mt-0"},G={class:"intro-y box mt-5 p-5"},j={class:"flex items-center justify-center p-2 text-base"},ee=N({__name:"monthly_monitoring_reports",setup(H){const r=k(),g=M(),C=P(),x=R(()=>String(C.name).split(".")[0]),h=()=>{g.push({name:`${x.value}.create`})};async function y(e){await r.destroy(e),s()}const D=[{text:"CONSECUTIVO",value:"consecutive"},{text:"FECHA CARGA DE DOCUMENTO",value:"date"},{text:"CREADO POR",value:"user.name"},{text:"CREACI\xD3N",value:"created_at"},{text:"ESTADO",value:"status"},{text:"ACCIONES",value:"actions"}],l=i([]),E=e=>{const{id:a,consecutive:c}=e;return{id:a,consecutive:c,sections:{general:{title:"Datos Generales",fields:{"FECHA CARGA":e.date,DOCUMENTO:e.file,DESCRIPCI\u00D3N:e.description}}}}};async function s(){const e=Object.keys(m.value).length?new URLSearchParams(m.value):null;await r.get(t.value,e),l.value=r.data.all,p.value=r.data.count_page}let t=i(1),p=i(0);const m=i({});function A(e){t.value=1,m.value=e,s()}function O(){s()}return w(async()=>{await s(),l.value.map(e=>({...e,actions:"Acciones"}))}),(e,a)=>{const c=S("v-pagination");return d(),f(I,null,[o("div",U,[T,n(v).monthlyMonitoring.create()?(d(),f("div",B,[o("button",{class:"btn btn-primary shadow-md mr-2",onClick:h}," Crear un Informe ")])):b("",!0)]),o("div",G,[o("div",j,[_(c,{modelValue:n(t),"onUpdate:modelValue":[a[0]||(a[0]=u=>F(t)?t.value=u:t=u),O],pages:n(p),"range-size":1,"active-color":"#DCEDFF"},null,8,["modelValue","pages"])]),_(V,{headers:D,items:n(l),item_see_fnc:E,management_permissions:n(v).monthlyMonitoring.crud_management(),label:"el informe","on-delete-fnc":y,onChange_status:a[1]||(a[1]=u=>s()),onChange_filter:A,server_options:{page:1,rowsPerPage:15}},null,8,["items","management_permissions"])])],64)}}});export{ee as default};
