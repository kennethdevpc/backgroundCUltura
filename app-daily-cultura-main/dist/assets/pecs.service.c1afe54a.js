import{H as _,r as D,u as v,P as o,K as l,Q as c,E as Y,O as f}from"./index.c93647e1.js";import{s as h,a as b}from"./index.37cca9d1.js";const d="pecs",u="api/v1";function E(){const m=_({all:[],one:{},count_page:0,beneficiaries:[]}),$=v(),y=D("");return{data:m,errors:y,get:async(s,a=null)=>{var e;try{o(!0);let n=Boolean(a)?`?page=${s}&${a}`:`?page=${s}`,r=await l.get(`/${u}/${d}${n}`).finally(()=>{o(!1)});r.status===200&&(m.all=r.data.items,m.count_page=r.data.count_page)}catch(n){c.custom_validation((e=n.response.data.error)!=null?e:n.response.data.message)}},getOne:async s=>{var a;try{o(!0);let e=await l.get(`/${u}/${d}/${s}`).finally(()=>{o(!1)});return e.status===200&&(m.one=e.data.items),e}catch(e){e.response.status===404?Y.not_found_by_id():c.custom_validation((a=e.response.data.error)!=null?a:e.response.data.message)}},update:async(s,a)=>{var t;y.value="";const e=new FormData,{place_image1:n,place_image2:r,...p}=a;for(const[i,g]of Object.entries(p))e.append(i,g);e.append("place_image1",n.file),e.append("place_image2",r.file);try{o(!0),(await l.post(`/${u}/${d}/${s}`,e,{"Content-Type":"multipart/form-data"}).finally(()=>{o(!1)})).status===200&&(c.update(),$.push({name:"pecs.index"}))}catch(i){o(!1),c.custom_validation((t=i.response.data.error)!=null?t:i.response.data.message)}},create:async s=>{var p;y.value="";const a=new FormData,{place_image1:e,place_image2:n,...r}=s;for(const[t,i]of Object.entries(r))a.append(t,i);a.append("place_image1",e.file),a.append("place_image2",n.file);try{o(!0);const t=await l.post(`/${u}/${d}`,a,{"Content-Type":"multipart/form-data"}).finally(()=>{o(!1)});return t.status===200&&t.data.success&&c.create(),t}catch(t){o(!1),c.custom_validation((p=t.response.data.error)!=null?p:t.response.data.message)}},destroy:async s=>{var a;try{o(!0),(await l.delete(`/${u}/${d}/${s}`).finally(()=>{o(!1)})).status==200&&c.destroy("PEC",s)}catch(e){o(!1),c.custom_validation((a=e.response.data.error)!=null?a:e.response.data.message)}},byActivityDate:async(s="",a,e)=>{const[n,r,p]=f().format("YYYY-MM-DD").split("-");let t="",i="";return p<=10?(t=f(h(f(`${n}-${r}-01`).toDate(),1)).format("YYYY-MM-DD"),i=`${n}-${r}-10`):(t=`${n}-${r}-11`,i=f(b(f(`${n}-${r}-10`).toDate(),1)).format("YYYY-MM-DD")),l.post(`/${u}/${d}/query/byRangeActvityDate`,{filter:s,initDate:a||t,lastDate:e||i})}}}export{E as p};
