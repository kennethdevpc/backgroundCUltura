import{r as c,u as y,P as r,K as o,Q as n,E as g}from"./index.c93647e1.js";const i="permissions",p="api/v1";function O(){const m=c([]),f=c([]),u=y(),l=c(""),d=c(!1);return{data:m,dataOne:f,errors:l,loading:d,get:async(t=!1)=>{var s;let e=`/${p}/${i}`;t&&(e+="?group_by=true");try{r(!0);let a=await o.get(e).finally(()=>{r(!1)});a.status===200&&(m.value=a.data.items)}catch(a){n.custom_validation((s=a.response.data.error)!=null?s:a.response.data.message)}},getOne:async t=>{var e;try{r(!0);let s=await o.get(`/${p}/${i}/${t}`).finally(()=>{r(!1)});return s.status===200&&(f.value=s.data.items),s}catch(s){s.response.status===404?g.not_found_by_id():n.custom_validation((e=s.response.data.error)!=null?e:s.response.data.message)}},update:async(t,e)=>{var s;l.value="";try{r(!0),(await o.put(`/${p}/${i}/${t}`,e).finally(()=>{r(!1)})).status===200&&(n.update(),u.push({name:"permissions.index",params:{}}))}catch(a){n.custom_validation((s=a.response.data.error)!=null?s:a.response.data.message)}},create:async(t,e)=>{var s;l.value="";try{d.value=!0,r(!0),(await o.post(`/${p}/${i}`,t,e).finally(()=>{r(!1)})).status===200&&(n.create(),u.push({name:"permissions.index",params:{}}))}catch(a){d.value=!1,n.custom_validation((s=a.response.data.error)!=null?s:a.response.data.message)}},destroy:async t=>{var e;try{r(!0),(await o.delete(`/${p}/${i}/${t}`).finally(()=>{r(!1)})).status===200&&(n.destroy("Permiso",t),await u.push({name:"permissions.index"}))}catch(s){n.custom_validation((e=s.response.data.error)!=null?e:s.response.data.message)}},assignPermissions:async t=>{var e;try{r(!0),(await o.post(`/${p}/${i}/assign-permissions`,t).finally(()=>{r(!1)})).status===200&&n.saved_permissions()}catch(s){n.custom_validation((e=s.response.data.error)!=null?e:s.response.data.message)}}}}export{O as p};
