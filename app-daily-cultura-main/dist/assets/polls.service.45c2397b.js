import{H as f,r as y,u as g,P as o,K as r,Q as n,E as $}from"./index.c93647e1.js";const c="polls",l="api/v1";function E(){const i=f({all:[],one:{},no_paginate:[],count_page:0}),d=g(),u=y("");return{data:i,errors:u,get:async(s,t=null)=>{var e;try{o(!0);let a=Boolean(t)?`?page=${s}&${t}`:`?page=${s}`,p=await r.get(`/${l}/${c}${a}`).finally(()=>{o(!1)});p.status===200&&(i.all=p.data.items,i.count_page=p.data.count_page)}catch(a){n.custom_validation((e=a.response.data.error)!=null?e:a.response.data.message)}},getOne:async s=>{var t;try{o(!0);let e=await r.get(`/${l}/${c}/${s}`).finally(()=>{o(!1)});return e.status===200&&(i.one=e.data.items),e}catch(e){e.response.status===404?$.not_found_by_id():n.custom_validation((t=e.response.data.error)!=null?t:e.response.data.message)}},update:async(s,t)=>{var e;u.value="";try{o(!0);const a=await r.put(`/${l}/${c}/${s}`,t).finally(()=>{o(!1)});return a.status===200&&(n.update(),d.push({name:"polls.index"})),a}catch(a){n.custom_validation((e=a.response.data.error)!=null?e:a.response.data.message)}},create:async(s,t)=>{var e;u.value="";try{o(!0);const a=await r.post(`/${l}/${c}`,s,t).finally(()=>{o(!1)});return a.status===200&&n.create(),a}catch(a){o(!1),n.custom_validation((e=a.response.data.error)!=null?e:a.response.data.message)}},destroy:async s=>{var t;try{o(!0),(await r.delete(`/${l}/${c}/${s}`).finally(()=>{o(!1)})).status==200&&n.destroy("Encuesta",s)}catch(e){n.custom_validation((t=e.response.data.error)!=null?t:e.response.data.message)}}}}export{E as p};
