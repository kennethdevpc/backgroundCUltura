import{ak as b,r as y,O as S,K as m,Q as i,P as L}from"./index.c93647e1.js";var M={exports:{}};(function(x,$){(function(E,l){l()})(b,function(){function E(a,n){return typeof n=="undefined"?n={autoBom:!1}:typeof n!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),n={autoBom:!n}),n.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}function l(a,n,s){var e=new XMLHttpRequest;e.open("GET",a),e.responseType="blob",e.onload=function(){h(e.response,n,s)},e.onerror=function(){console.error("could not download file")},e.send()}function g(a){var n=new XMLHttpRequest;n.open("HEAD",a,!1);try{n.send()}catch{}return 200<=n.status&&299>=n.status}function v(a){try{a.dispatchEvent(new MouseEvent("click"))}catch{var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(n)}}var c=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof b=="object"&&b.global===b?b:void 0,A=c.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),h=c.saveAs||(typeof window!="object"||window!==c?function(){}:"download"in HTMLAnchorElement.prototype&&!A?function(a,n,s){var e=c.URL||c.webkitURL,o=document.createElement("a");n=n||a.name||"download",o.download=n,o.rel="noopener",typeof a=="string"?(o.href=a,o.origin===location.origin?v(o):g(o.href)?l(a,n,s):v(o,o.target="_blank")):(o.href=e.createObjectURL(a),setTimeout(function(){e.revokeObjectURL(o.href)},4e4),setTimeout(function(){v(o)},0))}:"msSaveOrOpenBlob"in navigator?function(a,n,s){if(n=n||a.name||"download",typeof a!="string")navigator.msSaveOrOpenBlob(E(a,s),n);else if(g(a))l(a,n,s);else{var e=document.createElement("a");e.href=a,e.target="_blank",setTimeout(function(){v(e)})}}:function(a,n,s,e){if(e=e||open("","_blank"),e&&(e.document.title=e.document.body.innerText="downloading..."),typeof a=="string")return l(a,n,s);var o=a.type==="application/octet-stream",t=/constructor/i.test(c.HTMLElement)||c.safari,d=/CriOS\/[\d]+/.test(navigator.userAgent);if((d||o&&t||A)&&typeof FileReader!="undefined"){var r=new FileReader;r.onloadend=function(){var w=r.result;w=d?w:w.replace(/^data:[^;]*;/,"data:attachment/file;"),e?e.location.href=w:location=w,e=null},r.readAsDataURL(a)}else{var u=c.URL||c.webkitURL,R=u.createObjectURL(a);e?e.location=R:location.href=R,e=null,setTimeout(function(){u.revokeObjectURL(R)},4e4)}});c.saveAs=h.saveAs=h,x.exports=h})})(M);const p="api/v1",j="https://api-cultura.ssiset.com",f="exports",_="generateCut";function C(){const x={inscriptions:"Inscripciones",pecs:"Pecs",variables:"Variables",sesion:"Sesi\xF3n",users:"Usuarios",polls:"Encuesta",pollDesertions:"Deserciones de Encuestas",pedagogicals:"Pedag\xF3gicos",beneficiariesMonitor:"Beneficiarios monitores",beneficiariesInstructor:"Beneficiarios instructores",culturalEnsembles:"Bit\xE1cora Ensamble Cultural",culturalCirculations:"Bit\xE1cora Circulaci\xF3n Cultural",culturalSeedbeds:"Bit\xE1cora Semilleros Cultural",attendats:"Acudientes",parentschools:"Escuela de Padres",dialogueTables:"Mesa de Dialogo",binnacles_monitor:"Bit\xE1cora de Monitores",managerMonitorings:"Seguimiento Gestor Cultural",methodologicalInstructionModels:"Instrucci\xF3n metodol\xF3gica",binnacleManagers:"Activaci\xF3n cultural",psychosocialInstructions:"Instrucciones Psicosocial",psychopedagogicallogs:"Bit\xE1cora Psicopedag\xF3gica",methodologicalSheetsOne:"Ficha metod\xF3logica de planeaci\xF3n",methodologicalsheetstwo:"Ficha metod\xF3logica de evaluaci\xF3n",ambassador:"Embajadores",revisions:"Revisiones",methodologicalMonitorings:"Seguimiento metodol\xF3gico",methodologicalAccompaniments:"Acompa\xF1amiento metodol\xF3gico",strengtheningSuperMonIns:"Fortalecimiento supervisi\xF3n monitores e instructores",strengtheningOfMonitorings:"Fortalecimiento seguimiento",managerSupervisionvisit:"Visita de supervisi\xF3n de gestor",revisions:"Revisiones",monitoringReport:"Seguimiento",methodologicalStrengthening:"Fortalecimiento metodologico",binnacleTerritorie:"Visita territorio supervision",binnacleImpacts:"Bit\xE1coras de impacto",input_history:"Historial de Entradas",groups:"Grupos"},$=y([]);y([]);const E=y(""),l=y(0),g=y(S().format("DD_MM_YYYY"));return{data:$,errors:E,exportExcel:async(s,e)=>{var o;try{await m.post(`/${p}/${f}/excel/${s}`,e,{responseType:"blob"}).then(t=>{const d=URL.createObjectURL(new Blob([t.data],{type:"application/vnd.ms-excel"})),r=document.createElement("a");r.href=d,r.setAttribute("download",x[s]+"_"+g.value),document.body.appendChild(r),r.click(),i.general("La exportaci\xF3n fue exitosa")})}catch(t){t.response.status===404?i.info("Algo salio mal en la exportaci\xF3n"):i.custom_validation((o=t.response.data.error)!=null?o:t.response.data.message)}},exportPdf:async(s,e)=>{var o;try{let t=await m.post(`/${p}/${f}/pdf/${s}`,e).then(d=>{const r=window.URL.createObjectURL(new Blob([d.data])),u=document.createElement("a");u.href=r,u.setAttribute("download",s+"_"+g.value+".pdf"),document.body.appendChild(u),u.click()});t.status===201&&i.info(t.data.message)}catch(t){t.response.status===400?i.info(t.response.data.message):i.custom_validation((o=t.response.data.error)!=null?o:t.response.data.message)}},searchInfoReport:async s=>{var e;try{L(!0);let o=await m.post(`/${p}/${f}/excel`,s).finally(()=>{L(!1)});o.status===200&&(l.value=o.data.count)}catch(o){i.custom_validation((e=o.response.data.error)!=null?e:o.response.data.message)}},exportZipExcel:async(s,e)=>{var o;try{const t={headers:{"Access-Control-Allow-Origin":"true","Content-Type":"application/json"},responseType:"blob"};await m.post(`/${p}/${f}/excel/${s}`,e,t).then(d=>{const r=new Blob([d.data],{type:"application/zip"});M.exports.saveAs(r,x[s]+".zip")})}catch(t){t.response&&t.response.status===404?i.info("Algo sali\xF3 mal en la exportaci\xF3n"):i.custom_validation((o=t.response.data.error)!=null?o:t.response.data.message)}},count:l,exportZIP:async(s,e)=>{var o;try{let t=await m.post(`/${p}/${f}/pdf/${s}`,e).then(d=>{window.open(`${j}/${p}/${f}/download/${s}`,"_blank")});t.status===201&&i.info(t.data.message)}catch(t){t.response.status===400?i.info(t.response.data.message):i.custom_validation((o=t.response.data.error)!=null?o:t.response.data.message)}},generateCut:async(s,e)=>{var o;try{i.info("En aproximadamente 30 minutos sus informes quedaran actualizados y listos para su descarga, no cierre la pesta\xF1a.");let t=await m.post(`/${p}/${_}/excel/${s}`,e);t.status===200&&(l.value=t.data.count),i.general(t.data)}catch(t){i.custom_validation((o=t.response.data.error)!=null?o:t.response.data.message)}}}}export{C as r};
